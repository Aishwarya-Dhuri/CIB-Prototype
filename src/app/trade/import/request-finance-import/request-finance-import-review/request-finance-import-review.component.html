<!-- Deal No Modal Start-->
<app-modal [(isShow)]="isDealNoModalShow" size="md" headerText="Deal No">
  <div body class="p-my-3 aps-h-300">
    <app-ag-grid-listing
      id="dealNoGrid"
      #dealNoGrid
      colDefUrl="trade/importTransactions/requestFinance/private/exchangeDetailsReviewColDefs"
      [rowData]="parentRef.formData.exchangeDetails[0].selectedDealData"
      [gridOptions]="gridOptionsForExchangeDetails"
    >
    </app-ag-grid-listing>
  </div>
  <div footer class="left-right-container">
    <div class="left-container"></div>
    <div class="right-container p-pr-1">
      <button class="btn btn-md btn-tertiary" (click)="isDealNoModalShow = false">
        {{ 'CLOSE' | apsTranslate }}
      </button>
    </div>
  </div>
</app-modal>
<!--Deal No Modal End-->

<!-- Forward No Modal Start-->
<app-modal [(isShow)]="isForwardNoModalShow" size="md" headerText="Forward No">
  <div body class="p-my-3 aps-h-300">
    <app-ag-grid-listing
      id="forwardNoGrid"
      #forwardNoGrid
      colDefUrl="trade/importTransactions/requestFinance/private/exchangeDetailsReviewColDefs"
      [rowData]="parentRef.formData.exchangeDetails[0].selectedForwardData"
      [gridOptions]="gridOptionsForExchangeDetails"
    >
    </app-ag-grid-listing>
  </div>
  <div footer class="left-right-container">
    <div class="left-container"></div>
    <div class="right-container p-pr-1">
      <button class="btn btn-md btn-tertiary" (click)="isForwardNoModalShow = false">
        {{ 'CLOSE' | apsTranslate }}
      </button>
    </div>
  </div>
</app-modal>
<!--Forward No Modal End-->

<div class="container">
  <div class="p-grid g-margin-x">
    <div class="p-col-12 p-md-6 p-lg-6 p-sm-12">
      <div class="aps-card aps-h-100p">
        <div class="aps-card-header">
          <div class="text-size-14 text-bold text-color-dark-shade-1 p-px-3 aps-py-12">
            Importer Details
          </div>
        </div>
        <div class="aps-card-body">
          <div class="p-grid p-px-3">
            <div class="p-lg-4 p-md-4 p-sm-12 p-col-12">
              <app-review-form-field
                label="Applicant Name"
                [value]="parentRef.formData.applicantDetails[0].applicantName"
              ></app-review-form-field>
            </div>
          </div>
          <div class="p-grid p-px-2 p-pt-0 p-pb-2">
            <div class="p-lg-6 p-md-6 p-sm-12 p-col-12 p-pb-0">
              <div class="background-color-dark-3 text-size-12 p-px-2 p-py-1 border-radius-4">
                <app-review-form-field
                  label="Name"
                  [value]="parentRef.formData.applicantDetails[0].applicantName"
                ></app-review-form-field>
              </div>
            </div>
            <div class="p-lg-3 p-md-3 p-sm-12 p-col-12 p-pb-0">
              <div class="background-color-dark-3 text-size-12 p-px-2 p-py-1 border-radius-4">
                <app-review-form-field
                  label="Mobile Number"
                  [value]="parentRef.formData.applicantDetails[0].applicantMobileNo"
                ></app-review-form-field>
              </div>
            </div>
            <div class="p-lg-3 p-md-3 p-sm-12 p-col-12 p-pb-0">
              <div class="background-color-dark-3 text-size-12 p-px-2 p-py-1 border-radius-4">
                <app-review-form-field
                  label="IE Code"
                  [value]="parentRef.formData.applicantDetails[0].ieCode"
                ></app-review-form-field>
              </div>
            </div>
            <div class="p-lg-6 p-md-6 p-sm-12 p-col-12 p-pb-0">
              <div class="background-color-dark-3 text-size-12 p-px-2 p-py-1 border-radius-4">
                <app-review-form-field
                  label="Address"
                  [value]="parentRef.formData.applicantDetails[0].applicantAddress"
                ></app-review-form-field>
              </div>
            </div>
            <div class="p-lg-3 p-md-3 p-sm-12 p-col-12 p-pb-0">
              <div class="background-color-dark-3 text-size-12 p-px-2 p-py-1 border-radius-4">
                <app-review-form-field
                  label="Email"
                  [value]="parentRef.formData.applicantDetails[0].applicantEmail"
                ></app-review-form-field>
              </div>
            </div>
            <div class="p-lg-3 p-md-3 p-sm-12 p-col-12 p-pb-0">
              <div class="background-color-dark-3 text-size-12 p-px-2 p-py-1 border-radius-4">
                <app-review-form-field
                  label="CIF ID"
                  [value]="parentRef.formData.applicantDetails[0].cifId"
                ></app-review-form-field>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="p-col-12 p-md-6 p-lg-6 p-sm-12">
      <div class="aps-card">
        <div class="aps-card-header">
          <div class="left-right-container">
            <div class="left-container">
              <div class="text-size-14 text-bold text-color-dark-shade-1 p-px-3 aps-py-12">
                Limit Details
              </div>
            </div>
            <div class="right-container"></div>
          </div>
        </div>
        <div class="aps-card-body">
          <div class="left-right-container">
            <div class="left-container">
              <div class="text-size-14 text-bold text-color-dark-shade-1 p-px-3 aps-py-12">
                Importer {{ parentRef.formData.applicantDetails[0].applicantName }}
              </div>
            </div>
            <div class="right-container">
              <div class="inline-items p-px-3">
                <div class="item p-pr-1">
                  <div class="text-size-12 text-semi-bold text-color-dark-shade-1 aps-py-12">
                    Expires On :
                  </div>
                </div>
                <div class="item">
                  <div class="text-size-12 text-semi-bold text-color-danger aps-py-12">
                    25-Dec-2022
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="p-grid p-p-2">
            <div class="p-col-12 p-md-3 p-lg-3 p-sm-12">
              <div class="text-size-12 text-color-light-shade-1">Limit ID</div>
            </div>
            <div class="p-col-12 p-md-3 p-lg-3 p-sm-12">
              <div class="text-size-12 text-color-light-shade-1">Sanctioned Limit</div>
            </div>
            <div class="p-col-12 p-md-3 p-lg-3 p-sm-12">
              <div class="text-size-12 text-color-light-shade-1">Utilized Limit</div>
            </div>
            <div class="p-col-12 p-md-3 p-lg-3 p-sm-12">
              <div class="text-size-12 text-color-light-shade-1">Available Limit</div>
            </div>
          </div>

          <ng-container *ngIf="parentRef.formData.applicantDetails[0].applicantName">
            <div class="p-grid p-p-2" *ngFor="let item of limitDetails">
              <div class="p-col-12 p-md-3 p-lg-3 p-sm-12">
                <div class="text-size-12 text-semi-bold text-color-dark-shade-1">
                  {{ item.limitId }}
                </div>
              </div>
              <div class="p-col-12 p-md-3 p-lg-3 p-sm-12">
                <div class="text-size-12 text-semi-bold text-color-dark-shade-1">
                  <app-base-currency [amount]="item.sanctionedLimit"></app-base-currency>
                </div>
              </div>
              <div class="p-col-12 p-md-3 p-lg-3 p-sm-12">
                <div class="text-size-12 text-semi-bold text-color-dark-shade-1">
                  <app-base-currency [amount]="item.utilizedLimit"></app-base-currency>
                </div>
              </div>
              <div class="p-col-12 p-md-3 p-lg-3 p-sm-12">
                <div class="text-size-12 text-semi-bold text-color-dark-shade-1">
                  <app-base-currency [amount]="item.availableLimit"></app-base-currency>
                </div>
              </div>
            </div>
          </ng-container>
        </div>
      </div>
    </div>
    <div class="p-col-12 p-md-8 p-lg-8 p-sm-12 p-p-0">
      <div class="p-grid">
        <div class="p-col-12">
          <div class="aps-card">
            <div class="aps-card-header">
              <div class="text-size-14 text-bold text-color-dark-shade-1 p-px-3 aps-py-12">
                Finance Details
              </div>
            </div>
            <div class="aps-card-body">
              <div class="p-grid p-px-2">
                <div class="p-lg-4 p-md-4 p-sm-12 p-col-12">
                  <div class="background-color-dark-3 text-size-12 p-px-2 p-py-1 border-radius-4">
                    <app-review-form-field
                      label="Transaction Date"
                      [value]="parentRef.formData.financeDetails[0].transactionDate"
                    ></app-review-form-field>
                  </div>
                </div>
                <div class="p-lg-4 p-md-4 p-sm-12 p-col-12">
                  <div class="background-color-dark-3 text-size-12 p-px-2 p-py-1 border-radius-4">
                    <app-review-form-field
                      label="Purpose Code"
                      [value]="parentRef.formData.financeDetails[0].purposeCode"
                    ></app-review-form-field>
                  </div>
                </div>
                <div class="p-lg-4 p-md-4 p-sm-12 p-col-12">
                  <div class="background-color-dark-3 text-size-12 p-px-2 p-py-1 border-radius-4">
                    <app-review-form-field
                      label="Corporate Reference No"
                      [value]="parentRef.formData.financeDetails[0].corporateReferenceNo"
                    ></app-review-form-field>
                  </div>
                </div>
                <div class="p-lg-4 p-md-4 p-sm-12 p-col-12">
                  <div class="background-color-dark-3 text-size-12 p-px-2 p-py-1 border-radius-4">
                    <app-review-form-field
                      label="Loan Amount"
                      [value]="parentRef.formData.financeDetails[0].loanAmount"
                      type="baseCurrency"
                      [baseCurrency]="parentRef.formData.financeDetails[0].loanCurrencyCode"
                    ></app-review-form-field>
                  </div>
                </div>
                <div class="p-lg-4 p-md-4 p-sm-12 p-col-12">
                  <div class="background-color-dark-3 text-size-12 p-px-2 p-py-1 border-radius-4">
                    <app-review-form-field
                      label="Account To Be Credited"
                      [value]="parentRef.formData.financeDetails[0].accountToBeCredited"
                    ></app-review-form-field>
                  </div>
                </div>
              </div>
              <div class="p-grid p-px-2">
                <div class="p-lg-4 p-md-4 p-sm-12 p-col-12">
                  <div class="background-color-dark-3 text-size-12 p-px-2 p-py-1 border-radius-4">
                    <app-review-form-field
                      label="Loan Applied For"
                      [value]="parentRef.formData.financeDetails[0].loanAppliedFor"
                    ></app-review-form-field>
                  </div>
                </div>
                <div class="p-col-12 p-md-3 p-lg-3 p-sm-12">
                  <div class="text-size-14 text-color-light-shade-1 p-pt-3">
                    days after Transaction Date
                  </div>
                </div>
                <div class="p-col-12 p-md-1 p-lg-1 p-sm-12">
                  <div class="text-size-16 text-color-dark-shade-1 p-pt-3">OR</div>
                </div>
                <div class="p-lg-4 p-md-4 p-sm-12 p-col-12">
                  <div class="background-color-dark-3 text-size-12 p-px-2 p-py-1 border-radius-4">
                    <app-review-form-field
                      label="Selected Due Date"
                      [value]="parentRef.formData.financeDetails[0].selectedDueDate"
                    ></app-review-form-field>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="p-col-12 p-p-0">
          <div class="p-grid">
            <div
              class="p-col-12 p-md-5 p-lg-5 p-sm-12"
              *ngIf="parentRef.formData.isExchangeDetailsShow"
            >
              <div class="aps-card aps-h-100p">
                <div class="aps-card-header">
                  <div class="text-size-14 text-bold text-color-dark-shade-1 p-px-3 aps-py-12">
                    Exchange Details
                  </div>
                </div>
                <div class="aps-card-body">
                  <div class="inline-items">
                    <div class="item p-p-3">
                      <p-checkbox
                        name="isCard"
                        [label]="'Card' | apsTranslate"
                        [binary]="true"
                        [(ngModel)]="parentRef.formData.exchangeDetails[0].isCard"
                        [disabled]="true"
                      >
                      </p-checkbox>
                    </div>

                    <div class="item p-p-2" *ngIf="parentRef.formData.exchangeDetails[0].isCard">
                      <div
                        class="background-color-dark-3 text-size-12 p-px-2 p-py-1 border-radius-4"
                      >
                        <app-review-form-field
                          label="Exchange Amount"
                          [value]="parentRef.formData.exchangeDetails[0].exchangeAmount"
                          type="baseCurrency"
                          [baseCurrency]="parentRef.formData.exchangeDetails[0].exchangeCurrency"
                        ></app-review-form-field>
                      </div>
                    </div>
                  </div>
                  <div class="inline-items">
                    <div class="item p-p-3">
                      <p-checkbox
                        name="isDealNo"
                        [label]="'Deal No' | apsTranslate"
                        [(ngModel)]="parentRef.formData.exchangeDetails[0].isDealNo"
                        [binary]="true"
                        [disabled]="true"
                      >
                      </p-checkbox>
                    </div>
                    <div class="item p-p-3" *ngIf="parentRef.formData.exchangeDetails[0].isDealNo">
                      <div
                        (click)="isDealNoModalShow = true"
                        class="text-size-14 text-color-primary p-pt-2 text-semi-bold pointer"
                      >
                        {{ parentRef.formData.exchangeDetails[0].selectedDealNoRows }} Deals
                        Selected
                      </div>
                    </div>
                  </div>
                  <div class="inline-items">
                    <div class="item p-p-3">
                      <p-checkbox
                        name="isForward"
                        [label]="'Forward' | apsTranslate"
                        [(ngModel)]="parentRef.formData.exchangeDetails[0].isForward"
                        [binary]="true"
                        [disabled]="true"
                      >
                      </p-checkbox>
                    </div>
                    <div class="item p-p-3" *ngIf="parentRef.formData.exchangeDetails[0].isForward">
                      <div
                        (click)="isForwardNoModalShow = true"
                        class="text-size-14 text-color-primary p-pt-2 text-semi-bold pointer"
                      >
                        {{ parentRef.formData.exchangeDetails[0].selectedForwardNoRows }}
                        Forward Selected
                      </div>
                    </div>
                  </div>
                  <div class="inline-items p-px-3 p-pb-2">
                    <div class="background-color-dark-3 text-size-12 p-px-2 p-py-1 border-radius-4">
                      <app-review-form-field
                        label="Remarks"
                        [value]="parentRef.formData.exchangeDetails[0].remarks"
                      ></app-review-form-field>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div
              class="p-col-12 p-sm-12"
              [ngClass]="{ 'p-md-7 p-lg-7': parentRef.formData.isExchangeDetailsShow }"
            >
              <div class="aps-card aps-h-100p">
                <div class="aps-card-header">
                  <div class="text-size-14 text-bold text-color-dark-shade-1 p-px-3 aps-py-12">
                    Supporting Document
                  </div>
                </div>
                <div class="aps-card-body">
                  <div class="p-grid p-px-2">
                    <div class="p-md-4 p-lg-4 p-sm-12 p-col-12">
                      <div class="text-size-14 text-semi-bold text-color-dark-shade-1">
                        {{ 'Document Type' | apsTranslate }}
                      </div>
                    </div>
                    <div class="p-md-4 p-lg-4 p-sm-12 p-col-12">
                      <div class="text-size-14 text-semi-bold text-color-dark-shade-1">
                        {{ 'Reference Number' | apsTranslate }}
                      </div>
                    </div>
                    <div class="p-md-4 p-lg-4 p-sm-12 p-col-12">
                      <div class="text-size-14 text-semi-bold text-color-dark-shade-1">
                        {{ 'Upload Documents' | apsTranslate }}
                        <span class="text-size-8 text-color-normal"
                          >&nbsp;{{ 'Max 10MB each' | apsTranslate }}</span
                        >
                      </div>
                    </div>

                    <div class="p-md-4 p-lg-4 p-sm-12 p-col-12">
                      <p-checkbox
                        class="p-pt-2"
                        name="isTypeNumber1"
                        id="isTypeNumber1"
                        label="{{ 'Type Number 1' | apsTranslate }}"
                        [binary]="true"
                        [(ngModel)]="parentRef.formData.supportingDocuments[0].isTypeNumber1"
                        [disabled]="true"
                      >
                      </p-checkbox>
                    </div>
                    <div class="p-md-4 p-lg-4 p-sm-12 p-col-12">
                      <div class="text-size-14 text-color-dark-shade-1 p-pt-2">
                        {{
                          parentRef.formData.supportingDocuments[0].typeNumber1RefNo
                            ? parentRef.formData.supportingDocuments[0].typeNumber1RefNo
                            : '--'
                        }}
                      </div>
                    </div>
                    <div class="p-md-4 p-lg-4 p-sm-12 p-col-12">
                      <div
                        class="aps-card p-p-2"
                        *ngIf="
                          parentRef.formData.supportingDocuments[0].typeNumber1Document.length > 0
                        "
                      >
                        <div class="inline-items">
                          <div class="item">
                            <app-icon icon="fa-file"></app-icon>
                          </div>
                          <div class="item text-color-normal p-px-2">
                            <div class="text-size-12">
                              {{
                                parentRef.formData.supportingDocuments[0].typeNumber1Document[0]
                                  .fileName
                              }}
                            </div>
                            <div class="text-size-10">
                              {{
                                (
                                  +parentRef.formData.supportingDocuments[0].typeNumber1Document[0]
                                    .fileSize /
                                  1024 /
                                  1024
                                ).toFixed(2)
                              }}Mb
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="p-md-4 p-lg-4 p-sm-12 p-col-12">
                      <p-checkbox
                        class="p-pt-2"
                        name="isTypeNumber2"
                        id="isTypeNumber2"
                        label="{{ 'Type Number 2' | apsTranslate }}"
                        [binary]="true"
                        [disabled]="true"
                        [(ngModel)]="parentRef.formData.supportingDocuments[0].isTypeNumber2"
                      >
                      </p-checkbox>
                    </div>
                    <div class="p-md-4 p-lg-4 p-sm-12 p-col-12">
                      <div class="text-size-14 text-color-dark-shade-1 p-pt-2">
                        {{
                          parentRef.formData.supportingDocuments[0].typeNumber2RefNo
                            ? parentRef.formData.supportingDocuments[0].typeNumber2RefNo
                            : '--'
                        }}
                      </div>
                    </div>
                    <div class="p-md-4 p-lg-4 p-sm-12 p-col-12">
                      <div
                        class="aps-card p-p-2"
                        *ngIf="
                          parentRef.formData.supportingDocuments[0].typeNumber2Document.length > 0
                        "
                      >
                        <div class="inline-items">
                          <div class="item">
                            <app-icon icon="fa-file"></app-icon>
                          </div>
                          <div class="item text-color-normal p-px-2">
                            <div class="text-size-12">
                              {{
                                parentRef.formData.supportingDocuments[0].typeNumber2Document[0]
                                  .fileName
                              }}
                            </div>
                            <div class="text-size-10">
                              {{
                                (
                                  +parentRef.formData.supportingDocuments[0].typeNumber2Document[0]
                                    .fileSize /
                                  1024 /
                                  1024
                                ).toFixed(2)
                              }}Mb
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="p-col-12 p-md-4 p-lg-4 p-sm-12">
      <div class="aps-card aps-h-100p">
        <div class="aps-card-header">
          <div class="text-size-14 text-bold text-color-dark-shade-1 p-px-3 aps-py-12">
            Finance Summary
          </div>
        </div>
        <div class="aps-card-body">
          <div class="p-grid p-px-2">
            <div class="p-col-12 p-py-12">
              <div class="left-right-container">
                <div class="left-container">
                  <div class="text-size-14 text-color-light-shade-1">Loan Amount</div>
                </div>
                <div class="right-container">
                  <div class="text-size-14 text-semi-bold">
                    <app-base-currency
                      [amount]="parentRef.formData.financeDetails[0].loanAmount"
                      [currency]="this.parentRef.formData.financeDetails[0].loanCurrencyCode"
                    ></app-base-currency>
                  </div>
                </div>
              </div>
            </div>
            <div class="p-col-12 p-py-12">
              <div class="left-right-container">
                <div class="left-container">
                  <div class="text-size-14 text-color-light-shade-1">Interest Rate</div>
                </div>
                <div class="right-container">
                  <div class="text-size-14 text-semi-bold">As Per ROI</div>
                </div>
              </div>
            </div>
            <div class="p-col-12 p-py-12">
              <div class="left-right-container">
                <div class="left-container">
                  <div class="text-size-14 text-color-light-shade-1">Processing Fees</div>
                </div>
                <div class="right-container">
                  <div class="text-size-14 text-semi-bold">Banks SOC</div>
                </div>
              </div>
            </div>
            <div class="p-col-12 p-py-12">
              <div class="left-right-container">
                <div class="left-container">
                  <div class="text-size-14 text-color-light-shade-1">Repayment Date</div>
                </div>
                <div class="right-container">
                  <div class="text-size-14 text-semi-bold">
                    {{
                      parentRef.formData.financeDetails[0].selectedDueDate
                        ? parentRef.formData.financeDetails[0].selectedDueDate
                        : '-'
                    }}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="p-col-12">
      <div class="aps-card p-p-2">
        <p-checkbox
          [(ngModel)]="parentRef.formData.acceptTermsAndConditions"
          [binary]="true"
          label="Accept Terms and Conditions"
          [required]="true"
        >
        </p-checkbox>
      </div>
    </div>
  </div>
</div>
