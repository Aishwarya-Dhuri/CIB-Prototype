<!-- Deal No Modal Start-->
<app-search-modal
  header="Deal No"
  [(isShow)]="isDealNoModalShow"
  [isMultiSelect]="true"
  [preSelectedData]="parentRef.formData.exchangeDetails[0].selectedDealData"
  colDefUrl="trade/importTransactions/requestFinance/private/exchangeDetailsColDefs"
  rowDefUrl="trade/importTransactions/requestFinance/private/getDealNoDataList"
  (onSelection)="setDealNoData($event)"
></app-search-modal>
<!-- Deal No Modal End-->

<!-- Forward No Modal Start-->
<app-search-modal
  header="Forward No"
  [(isShow)]="isForwardNoModalShow"
  [isMultiSelect]="true"
  [preSelectedData]="parentRef.formData.exchangeDetails[0].selectedForwardData"
  colDefUrl="trade/importTransactions/requestFinance/private/exchangeDetailsColDefs"
  rowDefUrl="trade/importTransactions/requestFinance/private/getForwardNoDataList"
  (onSelection)="setForwardNoData($event)"
></app-search-modal>
<!--Forward No Modal End-->

<div class="container">
  <form name="form" #form="ngForm">
    <div class="p-grid g-margin-x">
      <div class="p-col-12 p-md-6 p-lg-6 p-sm-12">
        <div class="aps-card aps-h-100p">
          <div class="aps-card-header">
            <div class="text-size-14 text-bold text-color-dark-shade-1 p-px-3 aps-py-12">
              Importer Details
            </div>
          </div>
          <div class="aps-card-body">
            <div class="p-grid p-px-3">
              <div class="p-lg-4 p-md-4 p-sm-12 p-col-12 p-p-0">
                <aps-custom-select
                  name="applicantName"
                  id="applicantName"
                  label="{{ 'Applicant Name' | apsTranslate }}"
                  dataUrl="trade/importTransactions/requestFinance/private/dropdown/applicantNameDataList"
                  [value]="parentRef.formData.applicantDetails[0].applicantName"
                  (change)="changeApplicant($event)"
                  [(ngModel)]="parentRef.formData.applicantDetails[0].applicantName"
                  [required]="true"
                >
                </aps-custom-select>
              </div>
            </div>
            <div class="p-grid p-px-2 p-pt-0 p-pb-2">
              <div class="p-lg-6 p-md-6 p-sm-12 p-col-12 p-pb-0">
                <div class="background-color-dark-3 text-size-12 p-px-2 p-py-1 border-radius-4">
                  <app-review-form-field
                    label="Name"
                    [value]="parentRef.formData.applicantDetails[0].applicantName"
                  ></app-review-form-field>
                </div>
              </div>
              <div class="p-lg-3 p-md-3 p-sm-12 p-col-12 p-pb-0">
                <div class="background-color-dark-3 text-size-12 p-px-2 p-py-1 border-radius-4">
                  <app-review-form-field
                    label="Mobile Number"
                    [value]="parentRef.formData.applicantDetails[0].applicantMobileNo"
                  ></app-review-form-field>
                </div>
              </div>
              <div class="p-lg-3 p-md-3 p-sm-12 p-col-12 p-pb-0">
                <div class="background-color-dark-3 text-size-12 p-px-2 p-py-1 border-radius-4">
                  <app-review-form-field
                    label="IE Code"
                    [value]="parentRef.formData.applicantDetails[0].ieCode"
                  ></app-review-form-field>
                </div>
              </div>
              <div class="p-lg-6 p-md-6 p-sm-12 p-col-12 p-pb-0">
                <div class="background-color-dark-3 text-size-12 p-px-2 p-py-1 border-radius-4">
                  <app-review-form-field
                    label="Address"
                    [value]="parentRef.formData.applicantDetails[0].applicantAddress"
                  ></app-review-form-field>
                </div>
              </div>
              <div class="p-lg-3 p-md-3 p-sm-12 p-col-12 p-pb-0">
                <div class="background-color-dark-3 text-size-12 p-px-2 p-py-1 border-radius-4">
                  <app-review-form-field
                    label="Email"
                    [value]="parentRef.formData.applicantDetails[0].applicantEmail"
                  ></app-review-form-field>
                </div>
              </div>
              <div class="p-lg-3 p-md-3 p-sm-12 p-col-12 p-pb-0">
                <div class="background-color-dark-3 text-size-12 p-px-2 p-py-1 border-radius-4">
                  <app-review-form-field
                    label="CIF ID"
                    [value]="parentRef.formData.applicantDetails[0].cifId"
                  ></app-review-form-field>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="p-col-12 p-md-6 p-lg-6 p-sm-12">
        <div class="aps-card aps-h-100p">
          <div class="aps-card-header">
            <div class="left-right-container">
              <div class="left-container">
                <div class="text-size-14 text-bold text-color-dark-shade-1 p-px-3 aps-py-12">
                  Limit Details
                </div>
              </div>
              <div class="right-container"></div>
            </div>
          </div>
          <div class="aps-card-body">
            <div class="left-right-container">
              <div class="left-container">
                <div class="text-size-14 text-bold text-color-dark-shade-1 p-px-3 aps-py-12">
                  Importer {{ parentRef.formData.applicantDetails[0].applicantName }}
                </div>
              </div>
              <div class="right-container">
                <div class="inline-items p-px-3">
                  <div class="item p-pr-1">
                    <div class="text-size-12 text-semi-bold text-color-dark-shade-1 aps-py-12">
                      Expires On :
                    </div>
                  </div>
                  <div class="item">
                    <div class="text-size-12 text-semi-bold text-color-danger aps-py-12">
                      25-Dec-2022
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="p-grid p-p-2">
              <div class="p-col-12 p-md-3 p-lg-3 p-sm-12">
                <div class="text-size-12 text-color-light-shade-1">Limit ID</div>
              </div>
              <div class="p-col-12 p-md-3 p-lg-3 p-sm-12">
                <div class="text-size-12 text-color-light-shade-1">Sanctioned Limit</div>
              </div>
              <div class="p-col-12 p-md-3 p-lg-3 p-sm-12">
                <div class="text-size-12 text-color-light-shade-1">Utilized Limit</div>
              </div>
              <div class="p-col-12 p-md-3 p-lg-3 p-sm-12">
                <div class="text-size-12 text-color-light-shade-1">Available Limit</div>
              </div>
            </div>

            <ng-container *ngIf="parentRef.formData.applicantDetails[0].applicantName">
              <div class="p-grid p-p-2" *ngFor="let item of limitDetails">
                <div class="p-col-12 p-md-3 p-lg-3 p-sm-12">
                  <div class="text-size-12 text-semi-bold text-color-dark-shade-1">
                    {{ item.limitId }}
                  </div>
                </div>
                <div class="p-col-12 p-md-3 p-lg-3 p-sm-12">
                  <div class="text-size-12 text-semi-bold text-color-dark-shade-1">
                    <app-base-currency [amount]="item.sanctionedLimit"></app-base-currency>
                  </div>
                </div>
                <div class="p-col-12 p-md-3 p-lg-3 p-sm-12">
                  <div class="text-size-12 text-semi-bold text-color-dark-shade-1">
                    <app-base-currency [amount]="item.utilizedLimit"></app-base-currency>
                  </div>
                </div>
                <div class="p-col-12 p-md-3 p-lg-3 p-sm-12">
                  <div class="text-size-12 text-semi-bold text-color-dark-shade-1">
                    <app-base-currency [amount]="item.availableLimit"></app-base-currency>
                  </div>
                </div>
              </div>
            </ng-container>
          </div>
        </div>
      </div>
      <div class="p-col-12 p-md-8 p-lg-8 p-sm-12 p-p-0">
        <div class="p-grid">
          <div class="p-col-12">
            <div class="aps-card">
              <div class="aps-card-header">
                <div class="text-size-14 text-bold text-color-dark-shade-1 p-px-3 aps-py-12">
                  Finance Details
                </div>
              </div>
              <div class="aps-card-body">
                <div class="p-grid p-px-2">
                  <div class="p-col-12 p-md-4 p-lg-4 p-sm-12">
                    <app-aps-calender
                      name="transactionDate"
                      id="transactionDate"
                      label="{{ 'Transaction Date' | apsTranslate }}"
                      [showIcon]="true"
                      [required]="true"
                      [(ngModel)]="parentRef.formData.financeDetails[0].transactionDate"
                    >
                    </app-aps-calender>
                  </div>
                  <div class="p-col-12 p-md-4 p-lg-4 p-sm-12">
                    <aps-custom-select
                      name="purposeCode"
                      id="purposeCode"
                      label="{{ 'Purpose Code' | apsTranslate }}"
                      dataUrl="trade/importTransactions/requestFinance/private/dropdown/purposeCodeDataList"
                      [value]="parentRef.formData.financeDetails[0].purposeCode"
                      [(ngModel)]="parentRef.formData.financeDetails[0].purposeCode"
                      [required]="true"
                    >
                    </aps-custom-select>
                  </div>
                  <div class="p-col-12 p-md-4 p-lg-4 p-sm-12">
                    <aps-form-input
                      name="corporateReferenceNo"
                      id="corporateReferenceNo"
                      label="{{ 'Corporate Reference No' | apsTranslate }}"
                      [(ngModel)]="parentRef.formData.financeDetails[0].corporateReferenceNo"
                    >
                    </aps-form-input>
                  </div>
                  <div class="p-lg-4 p-md-4 p-sm-12 p-col-12">
                    <div class="inline-items">
                      <div class="item p-pr-2" style="width: 56px">
                        <aps-custom-select
                          name="loanCurrency"
                          id="loanCurrency"
                          label="CCY"
                          dataUrl="setup/generalMasters/currency/private/currencyList"
                          [value]="parentRef.formData.financeDetails[0].loanCurrency"
                          [(ngModel)]="parentRef.formData.financeDetails[0].loanCurrency"
                          (change)="onLoanCurrency($event)"
                          [required]="true"
                        >
                        </aps-custom-select>
                      </div>
                      <div class="item" style="width: calc(100% - 56px)">
                        <aps-form-input
                          name="loanAmount"
                          id="loanAmount"
                          label="{{ 'Loan Amount' | apsTranslate }}"
                          inputType="currencyFormatNotZero"
                          [required]="true"
                          [(ngModel)]="parentRef.formData.financeDetails[0].loanAmount"
                        >
                        </aps-form-input>
                      </div>
                    </div>
                  </div>
                  <div class="p-col-12 p-md-4 p-lg-4 p-sm-12">
                    <aps-custom-select
                      name="accountToBeCredited"
                      id="accountToBeCredited"
                      label="{{ 'Account To Be Credited' | apsTranslate }}"
                      dataUrl="setup/corporateOnboarding/corporateMain/private/accountList"
                      [value]="parentRef.formData.financeDetails[0].accountToBeCredited"
                      (change)="onAccountToBeCredited($event)"
                      [(ngModel)]="parentRef.formData.financeDetails[0].accountToBeCredited"
                      [required]="true"
                    >
                    </aps-custom-select>
                  </div>
                </div>
                <div class="p-grid p-px-2">
                  <div class="p-col-12 p-md-4 p-lg-4 p-sm-12">
                    <aps-form-input
                      name="loanAppliedFor"
                      id="loanAppliedFor"
                      label="{{ 'Loan Applied For' | apsTranslate }}"
                      inputType="numeric"
                      maxLength="4"
                      [(ngModel)]="parentRef.formData.financeDetails[0].loanAppliedFor"
                      [required]="true"
                      (change)="
                        changeLoanAppliedFor(parentRef.formData.financeDetails[0].loanAppliedFor)
                      "
                    >
                    </aps-form-input>
                  </div>
                  <div class="p-col-12 p-md-3 p-lg-3 p-sm-12">
                    <div class="text-size-14 text-color-light-shade-1 p-pt-3">
                      days after Transaction Date
                    </div>
                  </div>
                  <div class="p-col-12 p-md-1 p-lg-1 p-sm-12">
                    <div class="text-size-16 text-color-dark-shade-1 p-py-4">OR</div>
                  </div>
                  <div class="p-col-12 p-md-4 p-lg-4 p-sm-12">
                    <app-aps-calender
                      name="selectedDueDate"
                      id="selectedDueDate"
                      label="{{ 'Selected Due Date' | apsTranslate }}"
                      [showIcon]="true"
                      [required]="true"
                      (change)="changeDueDate(parentRef.formData.financeDetails[0].selectedDueDate)"
                      [(ngModel)]="parentRef.formData.financeDetails[0].selectedDueDate"
                    >
                    </app-aps-calender>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="p-col-12 p-p-0">
            <div class="p-grid">
              <div
                class="p-col-12 p-md-5 p-lg-5 p-sm-12"
                *ngIf="parentRef.formData.isExchangeDetailsShow"
              >
                <div class="aps-card aps-h-100p">
                  <div class="aps-card-header">
                    <div class="text-size-14 text-bold text-color-dark-shade-1 p-px-3 aps-py-12">
                      Exchange Details
                    </div>
                  </div>
                  <div class="aps-card-body">
                    <div class="inline-items">
                      <div class="item p-p-3">
                        <p-checkbox
                          name="isCard"
                          [label]="'Card' | apsTranslate"
                          [binary]="true"
                          [(ngModel)]="parentRef.formData.exchangeDetails[0].isCard"
                        >
                        </p-checkbox>
                      </div>
                      <div
                        *ngIf="parentRef.formData.exchangeDetails[0].isCard"
                        class="item p-pr-2"
                        style="width: 56px"
                      >
                        <aps-custom-select
                          name="exchangeCurrency"
                          id="exchangeCurrency"
                          label="CCY"
                          dataUrl="setup/generalMasters/currency/private/currencyList"
                          [value]="parentRef.formData.exchangeDetails[0].exchangeCurrency"
                          [(ngModel)]="parentRef.formData.exchangeDetails[0].exchangeCurrency"
                        >
                        </aps-custom-select>
                      </div>
                      <div
                        *ngIf="parentRef.formData.exchangeDetails[0].isCard"
                        class="item"
                        style="width: calc(100% - 160px)"
                      >
                        <aps-form-input
                          name="exchangeAmount"
                          id="exchangeAmount"
                          label="{{ 'Exchange Amount' | apsTranslate }}"
                          inputType="currencyFormatNotZero"
                          [required]="true"
                          [(ngModel)]="parentRef.formData.exchangeDetails[0].exchangeAmount"
                        >
                        </aps-form-input>
                      </div>
                    </div>
                    <div class="inline-items">
                      <div class="item p-p-3">
                        <p-checkbox
                          name="isDealNo"
                          [label]="'Deal No' | apsTranslate"
                          [(ngModel)]="parentRef.formData.exchangeDetails[0].isDealNo"
                          [binary]="true"
                          (onChange)="onDealSelected()"
                        >
                        </p-checkbox>
                      </div>
                      <div
                        class="item p-p-3"
                        *ngIf="parentRef.formData.exchangeDetails[0].isDealNo"
                      >
                        <div
                          (click)="isDealNoModalShow = true"
                          class="text-size-14 text-color-primary p-pt-2 text-semi-bold pointer"
                        >
                          {{ parentRef.formData.exchangeDetails[0].selectedDealNoRows }} Deals
                          Selected
                        </div>
                      </div>
                    </div>
                    <div class="inline-items">
                      <div class="item p-p-3">
                        <p-checkbox
                          name="isForward"
                          [label]="'Forward' | apsTranslate"
                          [(ngModel)]="parentRef.formData.exchangeDetails[0].isForward"
                          [binary]="true"
                          (onChange)="onForwardSelected()"
                        >
                        </p-checkbox>
                      </div>
                      <div
                        class="item p-p-3"
                        *ngIf="parentRef.formData.exchangeDetails[0].isForward"
                      >
                        <div
                          (click)="isForwardNoModalShow = true"
                          class="text-size-14 text-color-primary p-pt-2 text-semi-bold pointer"
                        >
                          {{ parentRef.formData.exchangeDetails[0].selectedForwardNoRows }}
                          Forward Selected
                        </div>
                      </div>
                    </div>
                    <div class="inline-items">
                      <div class="p-px-3">
                        <aps-form-input
                          name="remarks"
                          id="remarks"
                          label="{{ 'Remarks' | apsTranslate }}"
                          [required]="true"
                          [(ngModel)]="parentRef.formData.exchangeDetails[0].remarks"
                        >
                        </aps-form-input>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div
                class="p-col-12 p-sm-12"
                [ngClass]="{ 'p-md-7 p-lg-7': parentRef.formData.isExchangeDetailsShow }"
              >
                <div class="aps-card">
                  <div class="aps-card-header">
                    <div class="text-size-14 text-bold text-color-dark-shade-1 p-px-3 aps-py-12">
                      Supporting Document
                    </div>
                  </div>
                  <div class="aps-card-body">
                    <div class="p-grid p-px-2">
                      <div class="p-md-4 p-lg-4 p-sm-12 p-col-12">
                        <div class="text-size-14 text-semi-bold text-color-dark-shade-1">
                          {{ 'Document Type' | apsTranslate }}
                        </div>
                      </div>
                      <div class="p-md-4 p-lg-4 p-sm-12 p-col-12">
                        <div class="text-size-14 text-semi-bold text-color-dark-shade-1">
                          {{ 'Reference Number' | apsTranslate }}
                        </div>
                      </div>
                      <div class="p-md-4 p-lg-4 p-sm-12 p-col-12">
                        <div class="text-size-14 text-semi-bold text-color-dark-shade-1">
                          {{ 'Upload Documents' | apsTranslate }}
                          <span class="text-size-8 text-color-normal"
                            >&nbsp;{{ 'Max 10MB each' | apsTranslate }}</span
                          >
                        </div>
                      </div>

                      <div class="p-md-4 p-lg-4 p-sm-12 p-col-12">
                        <p-checkbox
                          class="p-pt-2"
                          name="isTypeNumber1"
                          id="isTypeNumber1"
                          label="{{ 'Type Number 1' | apsTranslate }}"
                          [binary]="true"
                          [(ngModel)]="parentRef.formData.supportingDocuments[0].isTypeNumber1"
                          [required]="true"
                        >
                        </p-checkbox>
                      </div>
                      <div class="p-md-4 p-lg-4 p-sm-12 p-col-12">
                        <aps-form-input
                          name="typeNumber1RefNo"
                          id="typeNumber1RefNo"
                          label="{{ 'Enter Ref. Number' | apsTranslate }}"
                          [(ngModel)]="parentRef.formData.supportingDocuments[0].typeNumber1RefNo"
                          [required]="parentRef.formData.supportingDocuments[0].isTypeNumber1"
                          [disabled]="!parentRef.formData.supportingDocuments[0].isTypeNumber1"
                        >
                        </aps-form-input>
                      </div>
                      <div class="p-md-4 p-lg-4 p-sm-12 p-col-12">
                        <upload-form-control
                          [hideDragDropContainerOnFIleUpload]="true"
                          [files]="parentRef.formData.supportingDocuments[0].typeNumber1Document"
                          (onUploaded)="
                            parentRef.formData.supportingDocuments[0].typeNumber1Document = $event
                          "
                          [disabled]="!parentRef.formData.supportingDocuments[0].isTypeNumber1"
                        ></upload-form-control>
                      </div>
                      <div class="p-md-4 p-lg-4 p-sm-12 p-col-12">
                        <p-checkbox
                          class="p-pt-2"
                          name="isTypeNumber2"
                          id="isTypeNumber2"
                          label="{{ 'Type Number 2' | apsTranslate }}"
                          [binary]="true"
                          [(ngModel)]="parentRef.formData.supportingDocuments[0].isTypeNumber2"
                          [required]="true"
                        >
                        </p-checkbox>
                      </div>
                      <div class="p-md-4 p-lg-4 p-sm-12 p-col-12">
                        <aps-form-input
                          name="typeNumber2RefNo"
                          id="typeNumber2RefNo"
                          label="{{ 'Enter Ref. Number' | apsTranslate }}"
                          [(ngModel)]="parentRef.formData.supportingDocuments[0].typeNumber2RefNo"
                          [required]="parentRef.formData.supportingDocuments[0].isTypeNumber2"
                          [disabled]="!parentRef.formData.supportingDocuments[0].isTypeNumber2"
                        >
                        </aps-form-input>
                      </div>
                      <div class="p-md-4 p-lg-4 p-sm-12 p-col-12">
                        <upload-form-control
                          [hideDragDropContainerOnFIleUpload]="true"
                          [files]="parentRef.formData.supportingDocuments[0].typeNumber2Document"
                          (onUploaded)="
                            parentRef.formData.supportingDocuments[0].typeNumber2Document = $event
                          "
                          [disabled]="!parentRef.formData.supportingDocuments[0].isTypeNumber2"
                        ></upload-form-control>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="p-col-12 p-md-4 p-lg-4 p-sm-12">
        <div class="aps-card aps-h-100p">
          <div class="aps-card-header">
            <div class="text-size-14 text-bold text-color-dark-shade-1 p-px-3 aps-py-12">
              Finance Summary
            </div>
          </div>
          <div class="aps-card-body">
            <div class="p-grid p-px-2">
              <div class="p-col-12 p-py-12">
                <div class="left-right-container">
                  <div class="left-container">
                    <div class="text-size-14 text-color-light-shade-1">Loan Amount</div>
                  </div>
                  <div class="right-container">
                    <div class="text-size-14 text-semi-bold">
                      <app-base-currency
                        [amount]="parentRef.formData.financeDetails[0].loanAmount"
                        [currency]="this.parentRef.formData.financeDetails[0].loanCurrencyCode"
                      ></app-base-currency>
                    </div>
                  </div>
                </div>
              </div>
              <div class="p-col-12 p-py-12">
                <div class="left-right-container">
                  <div class="left-container">
                    <div class="text-size-14 text-color-light-shade-1">Interest Rate</div>
                  </div>
                  <div class="right-container">
                    <div class="text-size-14 text-semi-bold">As Per ROI</div>
                  </div>
                </div>
              </div>
              <div class="p-col-12 p-py-12">
                <div class="left-right-container">
                  <div class="left-container">
                    <div class="text-size-14 text-color-light-shade-1">Processing Fees</div>
                  </div>
                  <div class="right-container">
                    <div class="text-size-14 text-semi-bold">Banks SOC</div>
                  </div>
                </div>
              </div>
              <div class="p-col-12 p-py-12">
                <div class="left-right-container">
                  <div class="left-container">
                    <div class="text-size-14 text-color-light-shade-1">Repayment Date</div>
                  </div>
                  <div class="right-container">
                    <div class="text-size-14 text-semi-bold">
                      {{
                        parentRef.formData.financeDetails[0].selectedDueDate
                          ? parentRef.formData.financeDetails[0].selectedDueDate
                          : '-'
                      }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>
