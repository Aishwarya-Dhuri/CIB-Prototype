<div class="container">
  <ng-container *ngIf="!loading; else loadingTemplate">
    <app-search-modal [(isShow)]="searchBeneficiary" header="{{ 'lbl_select_beneficiary' | translate }}"
      colDefUrl="trade/importTransactions/shippingGuarantee/private/beneficiaryColDefs"
      rowDefUrl="trade/importTransactions/shippingGuarantee/private/beneficiaryData"
      (onSelection)="onBeneSelection($event)"></app-search-modal>


    <app-search-modal [(isShow)]="searchLcNumber" header="{{ 'LC Number' | apsTranslate }}"
      colDefUrl="trade/importTransactions/shippingGuarantee/private/lcNumberColDefs"
      rowDefUrl="trade/importTransactions/shippingGuarantee/private/getLCNumberList"
      (onSelection)="onLCSelection($event)"></app-search-modal>

    <app-search-modal [(isShow)]="searchShippingCompanyCode" header="{{ 'Shipping Company' | apsTranslate }}"
      colDefUrl="trade/importTransactions/shippingGuarantee/private/shippingCompanyColDefs"
      rowDefUrl="trade/masters/shippingCompany/private/getAllList" (onSelection)="onShippingCompanySelection($event)">
    </app-search-modal>

    <app-search-modal [(isShow)]="searchConsigneeCode" header="{{ 'Consignee' | apsTranslate }}"
      colDefUrl="trade/importTransactions/shippingGuarantee/private/consigneeColDefs"
      rowDefUrl="trade/masters/consignee/private/getAllList" (onSelection)="onConsigneeSelection($event)">
    </app-search-modal>

    <app-search-modal [(isShow)]="searchNotifyPartyCode" header="{{ 'Notify Party' | apsTranslate }}"
      colDefUrl="trade/importTransactions/shippingGuarantee/private/notifyPartyColDefs"
      rowDefUrl="trade/masters/notifyParty/private/getAllList" (onSelection)="onNotifyPartySelection($event)">
    </app-search-modal>

    <app-modal [(isShow)]="isNewShippingCompany" size="md">
      <div header>
        <div class="left-right-container">
          <div class="left-container">
            <div class="text-size-16 text-semi-bold">Add New Shipping Company</div>
          </div>
        </div>
      </div>
      <div body>
        <app-shipping-company [parentRef]="parentRef"></app-shipping-company>
      </div>
      <div footer>
        <div class="left-right-container p-mt-3">
          <div class="left-container">
            <button class="btn btn-esm btn-tertiary p-px-3" (click)="isNewShippingCompany = false">
              CANCEL
            </button>
          </div>
          <div class="right-container">
            <button class="btn btn-esm btn-primary p-px-3" (click)="isNewShippingCompany = false">
              SUBMIT
            </button>
          </div>
        </div>
      </div>
    </app-modal>
    <app-modal [(isShow)]="isNewConsignee" size="md">
      <div header>
        <div class="left-right-container">
          <div class="left-container">
            <div class="text-size-16 text-semi-bold">Add New Consignee</div>
          </div>
        </div>
      </div>
      <div body>
        <app-consignee [parentRef]="parentRef"></app-consignee>
      </div>
      <div footer>
        <div class="left-right-container p-mt-3">
          <div class="left-container">
            <button class="btn btn-esm btn-tertiary p-px-3" (click)="isNewConsignee = false">
              CANCEL
            </button>
          </div>
          <div class="right-container">
            <button class="btn btn-esm btn-primary p-px-3" (click)="isNewConsignee = false">
              SUBMIT
            </button>
          </div>
        </div>
      </div>
    </app-modal>
    <app-modal [(isShow)]="isNewNotifyParty" size="md">
      <div header>
        <div class="left-right-container">
          <div class="left-container">
            <div class="text-size-16 text-semi-bold">Add New Notify Party</div>
          </div>
        </div>
      </div>
      <div body>
        <app-notify-party [parentRef]="parentRef"></app-notify-party>
      </div>
      <div footer>
        <div class="left-right-container p-mt-3">
          <div class="left-container">
            <button class="btn btn-esm btn-tertiary p-px-3" (click)="isNewNotifyParty = false">
              CANCEL
            </button>
          </div>
          <div class="right-container">
            <button class="btn btn-esm btn-primary p-px-3" (click)="isNewNotifyParty = false">
              SUBMIT
            </button>
          </div>
        </div>
      </div>
    </app-modal>
    <app-modal [(isShow)]="isTermsAndCondition" size="md">
      <div header>
        <div class="left-right-container">
          <div class="left-container">
            <div class="text-size-16 text-semi-bold">Terms And Conditions</div>
          </div>
        </div>
      </div>
      <div body>
        <div [innerHtml]="
            (termsAndCondition && termsAndCondition[0] ? termsAndCondition[0].description : '')
              | safeHtml
          "></div>
      </div>
      <div footer>
        <div class="left-right-container p-mt-3">
          <div class="left-container"></div>
          <div class="right-container">
            <button class="btn btn-md btn-primary p-px-3" (click)="isTermsAndCondition = false">
              CANCEL
            </button>
          </div>
        </div>
      </div>
    </app-modal>

    <div class="p-grid g-margin-x p-pb-3">
      <div class="p-col-12 p-py-1" style="margin-top: -8px !important">
        <div class="left-right-container">
          <div class="left-container"></div>
          <div class="right-container">
            <div class="left-right-container">
              <div class="left-container">
                <div class="p-px-2 p-py-1 border-radius-4" [ngClass]="
                    parentRef.stepperDetails.steps[3].stepStatus == 'repair' ||
                    parentRef.stepperDetails.steps[4].stepStatus == 'repair'
                      ? 'background-color-warning-light'
                      : 'background-color-success '
                  " *ngIf="repair">
                  <div class="inline-items">
                    <div class="item p-mr-2">
                      <app-icon [icon]="
                          parentRef.stepperDetails.steps[3].stepStatus == 'repair' ||
                          parentRef.stepperDetails.steps[4].stepStatus == 'repair'
                            ? 'fa-exclamation-triangle'
                            : 'fa-check-circle'
                        " [ngClass]="
                          parentRef.stepperDetails.steps[3].stepStatus == 'repair' ||
                          parentRef.stepperDetails.steps[4].stepStatus == 'repair'
                            ? 'text-color-warning'
                            : 'text-color-inverted'
                        " styleClasses="text-size-12"></app-icon>
                    </div>
                    <div class="item p-mr-4" style="padding-top: 2px">
                      <div class="text-size-14 text-semi-bold" [ngClass]="
                          parentRef.stepperDetails.steps[3].stepStatus == 'repair' ||
                          parentRef.stepperDetails.steps[4].stepStatus == 'repair'
                            ? 'text-color-normal'
                            : 'text-color-inverted'
                        ">
                        {{ activeStepIndex == 3 ? '1' : activeStepIndex == 4 ? '2' : '0' }}
                        {{ 'of' | apsTranslate }} 2 {{ 'Corrections made' | apsTranslate }}
                      </div>
                    </div>
                    <div class="item p-mr-3">
                      <app-icon icon="fa-chevron-left" rtlIcon="fa-chevron-right"
                        styleClasses="text-size-14 text-color-dark-shade-1"
                        (click)="changeRepairStep('previous')"></app-icon>
                    </div>
                    <div class="item p-mr-2">
                      <app-icon icon="fa-chevron-right" rtlIcon="fa-chevron-left"
                        styleClasses="text-size-14 text-color-dark-shade-1"
                        (click)="changeRepairStep('next')"></app-icon>
                    </div>
                  </div>
                </div>
              </div>

              <div class="right-container p-py-1" *ngIf="viewport === 'web'">
                <div class="inline-items">
                  <div class="item p-px-2">
                    <app-icon icon="fa-refresh"></app-icon>
                  </div>
                  <div class="item p-px-2 border-right">
                    <app-icon icon="fa-print"></app-icon>
                  </div>
                  <div class="item p-px-2">
                    <app-icon icon="fa-user"></app-icon>
                  </div>
                  <div class="item p-px-2">
                    <app-icon icon="fa-link"></app-icon>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="p-md-3 p-sm-12 p-col-12 p-py-1">
        <div class="aps-card text-color-dark-shade-1">
          <div class="left-right-container border-bottom border-radius-4 p-p-3"
            [ngClass]="{ 'active background-color-warning-light': showShippingRemarks }" *ngIf="repair"
            (click)="showShippingRemarks = true">
            <div class="left-container">
              <div class="text-size-14 text-color-normal text-semi-bold">
                <div class="label-with-icon-container">
                  <div class="icon">
                    <app-icon iconStyle="fas" icon="fa-circle"
                      styleClasses="text-color-warning text-size-12"></app-icon>
                  </div>
                  <div class="label">Bank Remarks (1)</div>
                </div>
              </div>
            </div>
            <div class="right-container">
              <app-icon icon="fa-chevron-right" styleClasses="text-size-14"></app-icon>
            </div>
          </div>
        </div>

        <app-stepper-header [parentRef]="parentRef" stepperType="vertical"
          (stepsReady)="onStepsReady()"></app-stepper-header>
      </div>

      <div class="p-lg-9 p-md-9 p-sm-12 p-col-12 p-py-1">
        <div class="aps-card aps-h-600" *ngIf="parentRef.formData">
          <div class="aps-card-header">
            <div class="left-right-container p-px-3">
              <div class="left-container">
                <div class="text-size-16 text-bold text-color-dark-shade-1 aps-py-12">
                  {{ showShippingRemarks ? 'Shipping Remarks' : activeStep?.displayLabel }}
                </div>
              </div>
              <div class="right-container p-py-2"></div>
            </div>
          </div>

          <div class="aps-card-body p-p-3" *ngIf="showShippingRemarks && repair" (click)="showShippingRemarks = false">
            <div class="left-right-container p-py-2 p-px-3 border-radius-4 background-color-warning-light">
              <div class="left-container">
                <div class="text-size-12 text-color-normal">
                  The mode of shipment shall be by Sea unless otherwise specified by AT & T on the
                  purchase order. In the absence of specific instructions, seller will select the
                  surface carrier for shipment.
                </div>
              </div>
              <div class="right-container">
                <app-icon icon="fa-info-circle" styleClasses="text-color-warning"></app-icon>
              </div>
            </div>
          </div>

          <div class="aps-card-body p-p-2 overflow-scroll" *ngIf="!showShippingRemarks">
            <form name="form1" #form1="ngForm" class="applicant-details"
              [apsHide]="activeStep && activeStep.displayLabel !== parentRef.stepperDetails.headings[0]">
              <div class="p-grid">
                <div class="p-md-4 p-sm-12 p-col-12">
                  <div class="background-color-dark-3 text-size-14 p-px-2 p-py-1 border-radius-4">
                    <div class="text-color-normal">Name</div>
                    <div class="text-color-dark-shade-1">
                      {{ parentRef.formData.applicantDetails[0].applicantName }}
                    </div>
                  </div>
                </div>
                <div class="p-lg-8 p-md-8 p-sm-12 p-col-12">
                  <div class="background-color-dark-3 text-size-14 p-px-2 p-py-1 border-radius-4">
                    <div class="text-color-normal">Address</div>
                    <div class="text-color-dark-shade-1">
                      {{ parentRef.formData.applicantDetails[0].applicantAddress }}
                    </div>
                  </div>
                </div>
                <div class="p-md-4 p-sm-12 p-col-12">
                  <div class="background-color-dark-3 text-size-14 p-px-2 p-py-1 border-radius-4">
                    <div class="text-color-normal">Mobile Number</div>
                    <div class="text-color-dark-shade-1">
                      {{ parentRef.formData.applicantDetails[0].applicantMobileNo }}
                    </div>
                  </div>
                </div>
                <div class="p-md-4 p-sm-12 p-col-12">
                  <div class="background-color-dark-3 text-size-14 p-px-2 p-py-1 border-radius-4">
                    <div class="text-color-normal">Email</div>
                    <div class="text-color-dark-shade-1">
                      {{ parentRef.formData.applicantDetails[0].applicantEmail }}
                    </div>
                  </div>
                </div>
                <div class="p-md-4 p-sm-12 p-col-12">
                  <div class="background-color-dark-3 text-size-14 p-px-2 p-py-1 border-radius-4">
                    <div class="text-color-normal">Import Export (IE) Code</div>
                    <div class="text-color-dark-shade-1">
                      {{ parentRef.formData.applicantDetails[0].ieCode }}
                    </div>
                  </div>
                </div>
              </div>
            </form>

            <form name="form2" #form2="ngForm" class="shipping-guarantee-details"
              [apsHide]="activeStep && activeStep.displayLabel !== parentRef.stepperDetails.headings[1]">
              <div class="p-grid">
                <div class="p-md-4 p-sm-12 p-col-12 p-py-0">
                  <aps-custom-select name="typeOfGuarantee" id="typeOfGuarantee" label="Type of Guarantee"
                    dataUrl="trade/importTransactions/shippingGuarantee/private/dropdown/typeOfGuaranteeList"
                    [(ngModel)]="parentRef.formData.shippingGuaranteeDetails[0].typeOfGuarantee"
                    [required]="true"></aps-custom-select>
                </div>
              </div>
              <div class="p-grid">
                <div class="p-md-4 p-sm-12 p-col-12 p-py-0">
                  <div class="text-size-14 text-semi-bold p-mb-2 text-color-dark-shade-1">
                    Payment Type
                  </div>
                  <p-radioButton class="p-mr-5" name="lc" id="lc" value="LC" label="LC" [required]="true"
                    [(ngModel)]="parentRef.formData.shippingGuaranteeDetails[0].paymentType">
                  </p-radioButton>
                  <p-radioButton name="collection" id="collection" value="Collection" label="Collection"
                    [required]="true" [(ngModel)]="parentRef.formData.shippingGuaranteeDetails[0].paymentType">
                  </p-radioButton>
                </div>
                <div class="p-md-4 p-sm-12 p-col-12 p-py-0"
                  *ngIf="parentRef.formData.shippingGuaranteeDetails[0].paymentType === 'Collection'">
                  <div class="text-size-14 text-semi-bold p-mb-2 text-color-dark-shade-1">
                    Payment Terms
                  </div>
                  <p-radioButton class="p-mr-5" name="da" id="da" value="DA" label="DA" [required]="true"
                    [(ngModel)]="parentRef.formData.shippingGuaranteeDetails[0].paymentTerms">
                  </p-radioButton>
                  <p-radioButton name="dp" id="dp" value="DP" label="DP" [required]="true"
                    [(ngModel)]="parentRef.formData.shippingGuaranteeDetails[0].paymentTerms">
                  </p-radioButton>
                </div>
                <div class="p-md-4 p-sm-12 p-col-12 p-py-0"
                  *ngIf="parentRef.formData.shippingGuaranteeDetails[0].paymentType === 'LC'">
                  <aps-form-input name="lcNumber" id="lcNumber" label="LC Number" [required]="true"
                    [rightIcon]="'fa-search'" (onRightIcon)="searchLcNumber = true" [disabled]="true"
                    [(ngModel)]="parentRef.formData.shippingGuaranteeDetails[0].lcNumber">
                  </aps-form-input>
                </div>
              </div>
              <div class="p-grid">
                <div class="p-md-4 p-sm-12 p-col-12 p-py-0">
                  <aps-form-input name="invoiceNumber" id="invoiceNumber" label="Invoice Number" [required]="true"
                    [(ngModel)]="parentRef.formData.shippingGuaranteeDetails[0].invoiceNumber">
                  </aps-form-input>
                </div>
                <div class="p-md-4 p-sm-12 p-col-12 p-py-0">
                  <app-aps-calender name="invoiceDate" id="invoiceDate" [showIcon]="true" [showClear]="true"
                    label="Invoice Date" [maxDate]="getCurrentDate()"
                    [(ngModel)]="parentRef.formData.shippingGuaranteeDetails[0].invoiceDate">
                  </app-aps-calender>
                </div>
              </div>
              <div class="p-grid">
                <div class="p-md-4 p-sm-12 p-col-12 p-py-0">
                  <aps-custom-select name="currency" id="currency" label="Currency"
                    dataUrl="setup/generalMasters/currency/private/currencyList" [required]="true" (change)="
                      parentRef.formData.shippingGuaranteeDetails[0].currencyCode =
                        $event.displayName
                    " [value]="parentRef.formData.shippingGuaranteeDetails[0].currency"
                    [(ngModel)]="parentRef.formData.shippingGuaranteeDetails[0].currency">
                  </aps-custom-select>
                </div>
                <div class="p-md-4 p-sm-12 p-col-12 p-py-0">
                  <aps-form-input name="amount" id="amount" label="Amount" inputType="currencyFormatNotZero"
                    [required]="true" [(ngModel)]="parentRef.formData.shippingGuaranteeDetails[0].amount">
                  </aps-form-input>
                </div>
                <div class="p-md-4 p-sm-12 p-col-12 p-py-0">
                  <aps-custom-select name="accountNumber" id="accountNumber" label="Account Number"
                    dataUrl="setup/corporateOnboarding/corporateMain/private/accountList" [required]="true"
                    [value]="parentRef.formData.shippingGuaranteeDetails[0].accountNumber"
                    [(ngModel)]="parentRef.formData.shippingGuaranteeDetails[0].accountNumber"
                    (change)="getAccountBalance($event)" helpText="Available Balance : {{ accountBalance }}">
                  </aps-custom-select>
                </div>
                <div class="p-md-4 p-sm-12 p-col-12 p-py-0">
                  <aps-form-input name="descriptionOfGoods" id="descriptionOfGoods" label="Description of Goods"
                    [required]="true" [(ngModel)]="parentRef.formData.shippingGuaranteeDetails[0].descriptionOfGoods">
                  </aps-form-input>
                </div>
                <div class="p-md-4 p-sm-12 p-col-12 p-py-0">
                  <div class="left-right-container border-radius-4 background-color-warning-light p-px-3 p-pt-1"
                    *ngIf="repair">
                    <div class="left-container">
                      <div class="text-size-12 text-color-normal">
                        {{ 'Please select Transaction date before 14 OCT 2021' | apsTranslate }}

                        <span *ngIf="repairFields.transactionDateMessage">
                          {{
                          'Please select Transaction date before 14 OCT 2021' | apsTranslate
                          }}.</span>
                      </div>
                    </div>
                    <div class="right-container p-ml-2">
                      <app-icon icon="fa-ellipsis-h" styleClasses="text-color-warning text-size-14" (click)="
                          repairFields.transactionDateMessage = !repairFields.transactionDateMessage
                        "></app-icon>
                    </div>
                  </div>

                  <app-aps-calender name="transactionDate" id="transactionDate" [showIcon]="true"
                    label="Transaction Date"
                    [(ngModel)]="parentRef.formData.shippingGuaranteeDetails[0].transactionDate" [required]="true"
                    [helpText]="repair ? repairFields.transactionDate : ''"></app-aps-calender>
                </div>
                <div class="p-md-4 p-sm-12 p-col-12 p-py-0">
                  <app-aps-calender name="sgExpiryDate" id="sgExpiryDate" [showIcon]="true" label="SG Expiry Date"
                    [minDate]="getCurrentDate()"
                    [(ngModel)]="parentRef.formData.shippingGuaranteeDetails[0].sgExpiryDate"
                    [required]="true"></app-aps-calender>
                </div>
                <div class="p-md-4 p-sm-12 p-col-12 p-py-0">
                  <app-aps-calender name="effectiveDate" id="effectiveDate" label="Effective Date"
                    [minDate]="getCurrentDate()"
                    [(ngModel)]="parentRef.formData.shippingGuaranteeDetails[0].effectiveDate"
                    [required]="true"></app-aps-calender>
                </div>
              </div>
            </form>

            <form name="form3" #form3="ngForm" class="beneficiary-details" [apsHide]="
                activeStep && activeStep.displayLabel !== parentRef.stepperDetails.headings[2]
              ">
              <div class="p-grid">
                <div class="p-col-12">
                  <p-radioButton class="p-mr-6" id="frequencyOfExecution" name="frequencyOfExecution"
                    value="Search Using Beneficiary Code" label="Search Using Beneficiary Code"
                    [(ngModel)]="parentRef.formData.beneficiaryDetails[0].frequencyOfExecution"
                    [required]="true"></p-radioButton>

                  <p-radioButton class="p-mr-4" id="frequencyOfExecution" name="frequencyOfExecution"
                    value="Add New Beneficiary" label="Add New Beneficiary"
                    [(ngModel)]="parentRef.formData.beneficiaryDetails[0].frequencyOfExecution"
                    [required]="true"></p-radioButton>
                </div>

                <div class="p-col-12" *ngIf="!parentRef.formData.beneficiaryDetails[0].frequencyOfExecution">
                  <app-nothing-here colSize="3" message="Enter beneficiary details for preview">
                  </app-nothing-here>
                </div>

                <ng-container *ngIf="
                    parentRef.formData.beneficiaryDetails[0].frequencyOfExecution ===
                    'Search Using Beneficiary Code'
                  ">
                  <div class="p-md-4 p-sm-12 p-col-12">
                    <aps-form-input name="beneficiaryCode" id="beneficiaryCode" label="Beneficiary Code"
                      [required]="true" [rightIcon]="'fa-search'" (onRightIcon)="searchBeneficiary = true"
                      [(ngModel)]="parentRef.formData.beneficiaryDetails[0].beneficiaryCode">
                    </aps-form-input>
                  </div>
                </ng-container>

                <ng-container *ngIf="
                    parentRef.formData.beneficiaryDetails[0].frequencyOfExecution ===
                      'Add New Beneficiary' ||
                    parentRef.formData.beneficiaryDetails[0].beneficiaryCode
                  ">
                  <div class="p-col-12 p-py-0 p-mt-4" *ngIf="
                      parentRef.formData.beneficiaryDetails[0].frequencyOfExecution ===
                      'Add New Beneficiary'
                    ">
                    <div class="text-size-14 text-color-dark-shade-1 text-semi-bold">
                      Add New Beneficiary
                    </div>
                  </div>

                  <div class="p-md-4 p-sm-12 p-col-12 p-pb-0">
                    <aps-form-input name="beneficiaryName" id="beneficiaryName" label="Beneficiary Name"
                      [required]="true" [(ngModel)]="parentRef.formData.beneficiaryDetails[0].beneficiaryName">
                    </aps-form-input>
                  </div>
                  <div class="p-md-4 p-sm-12 p-col-12 p-pb-0">
                    <aps-form-input name="email" id="email" label="Email"
                      [(ngModel)]="parentRef.formData.beneficiaryDetails[0].email" [required]="true"></aps-form-input>
                  </div>
                  <div class="p-md-4 p-sm-12 p-col-12 p-pb-0">
                    <aps-form-input name="bankSwiftCode" id="bankSwiftCode" label="Bank Swift Code"
                      [(ngModel)]="parentRef.formData.beneficiaryDetails[0].bankSwiftCode"
                      [required]="true"></aps-form-input>
                  </div>

                  <div class="p-col-9 p-py-0">
                    <div class="p-grid">
                      <div class="p-col-12 p-p-0">
                        <aps-form-input name="beneficiaryAddress1" id="beneficiaryAddress1" label="Beneficiary Address"
                          [(ngModel)]="
                            parentRef.formData.beneficiaryDetails[0].beneficiaryAddress1[0].address
                          " [required]="true">
                        </aps-form-input>
                      </div>
                      <div class="p-col-12 p-p-0"
                        *ngIf="parentRef.formData.beneficiaryDetails[0].beneficiaryAddress2[0].show">
                        <aps-form-input name="beneficiaryAddress2" id="beneficiaryAddress2" label="Beneficiary Address"
                          [rightIcon]="'fa-trash-alt'" (onRightIcon)="deleteBeneficiaryAddress(2)" [(ngModel)]="
                            parentRef.formData.beneficiaryDetails[0].beneficiaryAddress2[0].address
                          "></aps-form-input>
                      </div>
                      <div class="p-col-12 p-p-0"
                        *ngIf="parentRef.formData.beneficiaryDetails[0].beneficiaryAddress3[0].show">
                        <aps-form-input name="beneficiaryAddress3" id="beneficiaryAddress3" label="Beneficiary Address"
                          [rightIcon]="'fa-trash-alt'" (onRightIcon)="deleteBeneficiaryAddress(3)" [(ngModel)]="
                            parentRef.formData.beneficiaryDetails[0].beneficiaryAddress3[0].address
                          "></aps-form-input>
                      </div>
                    </div>
                  </div>
                  <div class="p-col-3">
                    <button class="btn text-center btn btn-tertiary" (click)="addBeneficiaryAddress()" [disabled]="
                        parentRef.formData.beneficiaryDetails[0].beneficiaryAddress1[0].show &&
                        parentRef.formData.beneficiaryDetails[0].beneficiaryAddress2[0].show &&
                        parentRef.formData.beneficiaryDetails[0].beneficiaryAddress3[0].show
                      ">
                      <app-icon icon="fa-plus"> </app-icon>&nbsp;ADDRESS LINE
                    </button>
                  </div>
                  <div class="p-md-4 p-sm-12 p-col-12 p-py-0">
                    <aps-form-input name="country" id="country" label="Country" [required]="true"
                      [(ngModel)]="parentRef.formData.beneficiaryDetails[0].country">
                    </aps-form-input>
                  </div>
                  <div class="p-md-8 p-sm-12 p-col-12 p-p-0"></div>
                  <div class="p-md-4 p-sm-12 p-col-12 p-py-0">
                    <aps-form-input name="beneficiaryAccountNumber" id="beneficiaryAccountNumber"
                      label="Beneficiary Account Number" [(ngModel)]="
                        parentRef.formData.beneficiaryDetails[0].beneficiaryAccountNumber
                      " [required]="true"></aps-form-input>
                  </div>
                  <div class="p-md-8 p-sm-12 p-col-12 p-py-0">
                    <aps-form-input name="beneficiaryBankName" id="beneficiaryBankName" label="Beneficiary Bank Name"
                      [(ngModel)]="parentRef.formData.beneficiaryDetails[0].beneficiaryBankName"
                      [required]="true"></aps-form-input>
                  </div>
                  <div class="p-col-9 p-py-0">
                    <div class="p-grid">
                      <div class="p-col-12 p-p-0">
                        <aps-form-input name="beneficiaryBankAddress1" id="beneficiaryBankAddress1"
                          label="Beneficiary Bank Address" [(ngModel)]="
                            parentRef.formData.beneficiaryDetails[0].beneficiaryBankAddress1[0]
                              .address
                          " [required]="true"></aps-form-input>
                      </div>
                      <div class="p-col-12 p-p-0" *ngIf="
                          parentRef.formData.beneficiaryDetails[0].beneficiaryBankAddress2[0].show
                        ">
                        <aps-form-input name="beneficiaryBankAddress2" id="beneficiaryBankAddress2"
                          label="Beneficiary Bank Address" [(ngModel)]="
                            parentRef.formData.beneficiaryDetails[0].beneficiaryBankAddress2[0]
                              .address
                          " [rightIcon]="'fa-trash-alt'" (onRightIcon)="deleteBeneficiaryBankAddress(2)"
                          [required]="true"></aps-form-input>
                      </div>
                      <div class="p-col-12 p-p-0" *ngIf="
                          parentRef.formData.beneficiaryDetails[0].beneficiaryBankAddress3[0].show
                        ">
                        <aps-form-input name="beneficiaryBankAddress3" id="beneficiaryBankAddress3"
                          label="Beneficiary Bank Address" [(ngModel)]="
                            parentRef.formData.beneficiaryDetails[0].beneficiaryBankAddress3[0]
                              .address
                          " [rightIcon]="'fa-trash-alt'" (onRightIcon)="deleteBeneficiaryBankAddress(3)"
                          [required]="true"></aps-form-input>
                      </div>
                    </div>
                  </div>
                  <div class="p-col-3">
                    <button class="btn text-center btn btn-tertiary" (click)="addBeneficiaryBankAddress()" [disabled]="
                        parentRef.formData.beneficiaryDetails[0].beneficiaryBankAddress1[0].show &&
                        parentRef.formData.beneficiaryDetails[0].beneficiaryBankAddress2[0].show &&
                        parentRef.formData.beneficiaryDetails[0].beneficiaryBankAddress3[0].show
                      ">
                      <app-icon icon="fa-plus"> </app-icon>&nbsp;ADDRESS LINE
                    </button>
                  </div>
                </ng-container>
              </div>
            </form>

            <form name="form4" #form4="ngForm" class="shipping-details" [apsHide]="
                activeStep && activeStep.displayLabel !== parentRef.stepperDetails.headings[3]
              ">
              <div class="p-grid">
                <div class="p-md-4 p-sm-12 p-col-12">
                  <div class="text-size-14 text-semi-bold p-mb-2 text-color-dark-shade-1">
                    Mode of Shipment <span class="text-color-danger">*</span>
                  </div>
                  <p-radioButton class="p-mr-5" name="air" id="air" value="Air" label="Air" [required]="true"
                    [(ngModel)]="parentRef.formData.shippingDetails[0].modeOfShipment">
                  </p-radioButton>
                  <p-radioButton class="p-mr-5" name="road" id="road" value="Road" label="Road" [required]="true"
                    [(ngModel)]="parentRef.formData.shippingDetails[0].modeOfShipment">
                  </p-radioButton>
                  <p-radioButton name="sea" id="sea" value="Sea" label="Sea" [required]="true"
                    [(ngModel)]="parentRef.formData.shippingDetails[0].modeOfShipment">
                  </p-radioButton>
                </div>
                <div class="p-md-4 p-sm-12 p-col-12">
                  <div class="left-right-container border-radius-4 background-color-warning-light p-px-3"
                    *ngIf="repair">
                    <div class="left-container">
                      <div class="text-size-12 text-color-normal">
                        {{ 'Please select Shipment date before 14 OCT 2021' | apsTranslate }}.
                        <span *ngIf="repairFields.dateOfShipmentMessage">
                          {{
                          'Please select Shipment date before 14 OCT 2021' | apsTranslate
                          }}.</span>
                      </div>
                    </div>
                    <div class="right-container p-ml-2">
                      <app-icon icon="fa-ellipsis-h" styleClasses="text-color-warning text-size-14" (click)="
                          repairFields.dateOfShipmentMessage = !repairFields.dateOfShipmentMessage
                        "></app-icon>
                    </div>
                  </div>

                  <app-aps-calender name="dateOfShipment" id="dateOfShipment" label="Date of Shipment" [showIcon]="true"
                    [required]="true" [maxDate]="getCurrentDate()"
                    [(ngModel)]="parentRef.formData.shippingDetails[0].dateOfShipment"
                    [helpText]="repair ? repairFields.dateOfShipment : ''">
                  </app-aps-calender>
                </div>
              </div>
              <div class="p-grid">
                <div class="p-md-4 p-sm-12 p-col-12">
                  <aps-form-input name="billOfLadingOrAirwayBillNo" id="billOfLadingOrAirwayBillNo"
                    label="Bill of Lading / Airway Bill No"
                    [(ngModel)]="parentRef.formData.shippingDetails[0].billOfLadingOrAirwayBillNo"
                    [required]="true"></aps-form-input>
                </div>
                <div class="p-md-4 p-sm-12 p-col-12">
                  <app-aps-calender name="billOfLadingOrAirwayBillDate" id="billOfLadingOrAirwayBillDate"
                    label="Bill of Lading / Airway Bill Date" [required]="true"
                    [(ngModel)]="parentRef.formData.shippingDetails[0].billOfLadingOrAirwayBillDate">
                  </app-aps-calender>
                </div>
              </div>
              <div class="p-grid">
                <div class="p-md-4 p-col-12 p-sm-12">
                  <aps-form-input name="containerNumber" id="containerNumber" label="Containe Number"
                    [(ngModel)]="parentRef.formData.shippingDetails[0].containerNumber"
                    [required]="true"></aps-form-input>
                </div>
                <div class="p-md-4 p-col-12 p-sm-12">
                  <aps-form-input name="nameOfVesselOrFlightName" id="nameOfVesselOrFlightName"
                    label="Name of Vessel/Flight Name"
                    [(ngModel)]="parentRef.formData.shippingDetails[0].nameOfVesselOrFlightName"
                    [required]="true"></aps-form-input>
                </div>
                <div class="p-md-4 p-col-12 p-sm-12">
                  <aps-form-input name="voyageOrFlightNo" id="voyageOrFlightNo" label="Voyage/Flight No"
                    [(ngModel)]="parentRef.formData.shippingDetails[0].voyageOrFlightNo"
                    [required]="true"></aps-form-input>
                </div>
                <div class="p-md-4 p-col-12 p-sm-12">
                  <aps-form-input name="placeOfIssue" id="placeOfIssue" label="Place of Issue"
                    [(ngModel)]="parentRef.formData.shippingDetails[0].placeOfIssue" [required]="true"></aps-form-input>
                </div>
              </div>
              <div class="p-grid">
                <div class="p-md-4 p-sm-12 p-col-12">
                  <aps-form-input name="portOfLoadingOrAirportOfDeparture" id="portOfLoadingOrAirportOfDeparture"
                    label="Port of Loading/Airport of Departure" [(ngModel)]="
                      parentRef.formData.shippingDetails[0].portOfLoadingOrAirportOfDeparture
                    " [required]="true"></aps-form-input>
                </div>
                <div class="p-md-4 p-sm-12 p-col-12">
                  <aps-form-input name="portOfDischargeOrAirportOfDestination"
                    id="portOfDischargeOrAirportOfDestination" label="Port of Discharge/Airport of Destination"
                    [(ngModel)]="
                      parentRef.formData.shippingDetails[0].portOfDischargeOrAirportOfDestination
                    " [required]="true"></aps-form-input>
                </div>
              </div>
              <div class="p-grid">
                <div class="p-col-12 p-md-4 p-sm-12">
                  <aps-form-input name="shipmentMarks" id="shipmentMarks" label="Shipment Marks"
                    [(ngModel)]="parentRef.formData.shippingDetails[0].shipmentMarks"
                    [required]="true"></aps-form-input>
                </div>
                <div class="p-col-12 p-md-4 p-sm-12">
                  <aps-form-input name="shipmentAgent" id="shipmentAgent" label="Shipment Agent"
                    [(ngModel)]="parentRef.formData.shippingDetails[0].shipmentAgent"
                    [required]="true"></aps-form-input>
                </div>
                <div class="p-col-12 p-md-4 p-sm-12">
                  <aps-form-input name="otherShippingDetails" id="otherShippingDetails" label="Other Shipping Details"
                    [(ngModel)]="parentRef.formData.shippingDetails[0].otherShippingDetails"
                    [required]="true"></aps-form-input>
                </div>
                <div class="p-col-12 p-md-4 p-sm-12">
                  <aps-form-input name="shippingDisclaimers" id="shippingDisclaimers" label="Shipping Disclaimers"
                    [(ngModel)]="parentRef.formData.shippingDetails[0].shippingDisclaimers"
                    [required]="true"></aps-form-input>
                </div>
              </div>
            </form>

            <form name="form5" #form5="ngForm" class="shipping-document-details" [apsHide]="
                activeStep && activeStep.displayLabel !== parentRef.stepperDetails.headings[4]
              ">
              <div class="p-grid">
                <div class="p-col-12 p-md-5 p-lg-5 p-sm-12">
                  <aps-form-input name="shippingCompanyCodeSearch" id="shippingCompanyCodeSearch"
                    label="Shipping Company Code" [required]="true" [rightIcon]="'fa-search'"
                    (onRightIcon)="searchShippingCompanyCode = true" [disabled]="true" [(ngModel)]="
                      parentRef.formData.shippingDocumentDetails[0].shippingCompany[0]
                        .shippingCompanyCode
                    ">
                  </aps-form-input>
                </div>
                <div class="p-col-12 p-md-1 p-lg-1 p-sm-12 text-center">
                  <div class="text-size-14 text-color-dark-shade-1 p-py-4">OR</div>
                </div>
                <div class="p-col-12 p-md-6 p-sm-12">
                  <div class="p-py-3">
                    <button class="btn text-center btn btn-tertiary p-py-2" (click)="isNewShippingCompany = true">
                      <app-icon icon="fa-plus-square"></app-icon>
                      Add New Shipping Company
                    </button>
                  </div>
                </div>
                <div class="p-md-4 p-sm-12 p-col-12" *ngIf="
                    parentRef.formData.shippingDocumentDetails[0].shippingCompany[0]
                      .shippingCompanyName
                  ">
                  <div class="background-color-dark-3 text-size-14 p-px-2 p-py-1 border-radius-4">
                    <div class="text-color-normal">Shipping Company Name</div>
                    <div class="text-color-dark-shade-1">
                      {{
                      parentRef.formData.shippingDocumentDetails[0].shippingCompany[0]
                      .shippingCompanyName
                      }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="p-grid">
                <div class="p-md-4 p-sm-12 p-col-12" *ngIf="
                    parentRef.formData.shippingDocumentDetails[0].shippingCompany[0]
                      .shippingCompanyAddress1[0].address
                  ">
                  <div class="background-color-dark-3 text-size-14 p-px-2 p-py-1 border-radius-4">
                    <div class="text-color-normal">Shipping Company Address1</div>
                    <div class="text-color-dark-shade-1">
                      {{
                      parentRef.formData.shippingDocumentDetails[0].shippingCompany[0]
                      .shippingCompanyAddress1[0].address
                      }}
                    </div>
                  </div>
                </div>
                <div class="p-md-4 p-sm-12 p-col-12" *ngIf="
                    parentRef.formData.shippingDocumentDetails[0].shippingCompany[0]
                      .shippingCompanyAddress2[0].address
                  ">
                  <div class="background-color-dark-3 text-size-14 p-px-2 p-py-1 border-radius-4">
                    <div class="text-color-normal">Shipping Company Address2</div>
                    <div class="text-color-dark-shade-1">
                      {{
                      parentRef.formData.shippingDocumentDetails[0].shippingCompany[0]
                      .shippingCompanyAddress2[0].address
                      }}
                    </div>
                  </div>
                </div>
                <div class="p-md-4 p-sm-12 p-col-12" *ngIf="
                    parentRef.formData.shippingDocumentDetails[0].shippingCompany[0]
                      .shippingCompanyAddress3[0].address
                  ">
                  <div class="background-color-dark-3 text-size-14 p-px-2 p-py-1 border-radius-4">
                    <div class="text-color-normal">Shipping Company Address3</div>
                    <div class="text-color-dark-shade-1">
                      {{
                      parentRef.formData.shippingDocumentDetails[0].shippingCompany[0]
                      .shippingCompanyAddress3[0].address
                      }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="p-grid">
                <div class="p-col-12 p-md-5 p-lg-5 p-sm-12">
                  <aps-form-input name="consigneeCodeSearch" id="consigneeCodeSearch" label="Consignee Code"
                    [required]="true" [rightIcon]="'fa-search'" (onRightIcon)="searchConsigneeCode = true"
                    [disabled]="true" [(ngModel)]="
                      parentRef.formData.shippingDocumentDetails[0].consignee[0].consigneeCode
                    ">
                  </aps-form-input>
                </div>
                <div class="p-col-12 p-md-1 p-lg-1 p-sm-12 text-center">
                  <div class="text-size-14 text-color-dark-shade-1 p-py-4">OR</div>
                </div>
                <div class="p-col-12 p-md-6 p-sm-12">
                  <div class="p-py-3">
                    <button class="btn text-center btn btn-tertiary p-py-2" (click)="isNewConsignee = true">
                      <app-icon icon="fa-plus-square"></app-icon>
                      Add New Consignee
                    </button>
                  </div>
                </div>
                <div class="p-md-4 p-sm-12 p-col-12"
                  *ngIf="parentRef.formData.shippingDocumentDetails[0].consignee[0].consigneeName">
                  <div class="background-color-dark-3 text-size-14 p-px-2 p-py-1 border-radius-4">
                    <div class="text-color-normal">Consignee Name</div>
                    <div class="text-color-dark-shade-1">
                      {{ parentRef.formData.shippingDocumentDetails[0].consignee[0].consigneeName }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="p-grid">
                <div class="p-md-4 p-sm-12 p-col-12" *ngIf="
                    parentRef.formData.shippingDocumentDetails[0].consignee[0].consigneeAddress1[0]
                      .address
                  ">
                  <div class="background-color-dark-3 text-size-14 p-px-2 p-py-1 border-radius-4">
                    <div class="text-color-normal">Consignee Address1</div>
                    <div class="text-color-dark-shade-1">
                      {{
                      parentRef.formData.shippingDocumentDetails[0].consignee[0]
                      .consigneeAddress1[0].address
                      }}
                    </div>
                  </div>
                </div>
                <div class="p-md-4 p-sm-12 p-col-12" *ngIf="
                    parentRef.formData.shippingDocumentDetails[0].consignee[0].consigneeAddress2[0]
                      .address
                  ">
                  <div class="background-color-dark-3 text-size-14 p-px-2 p-py-1 border-radius-4">
                    <div class="text-color-normal">Consignee Address2</div>
                    <div class="text-color-dark-shade-1">
                      {{
                      parentRef.formData.shippingDocumentDetails[0].consignee[0]
                      .consigneeAddress2[0].address
                      }}
                    </div>
                  </div>
                </div>
                <div class="p-md-4 p-sm-12 p-col-12" *ngIf="
                    parentRef.formData.shippingDocumentDetails[0].consignee[0].consigneeAddress3[0]
                      .address
                  ">
                  <div class="background-color-dark-3 text-size-14 p-px-2 p-py-1 border-radius-4">
                    <div class="text-color-normal">Consignee Address3</div>
                    <div class="text-color-dark-shade-1">
                      {{
                      parentRef.formData.shippingDocumentDetails[0].consignee[0]
                      .consigneeAddress3[0].address
                      }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="p-grid">
                <div class="p-col-12 p-md-5 p-lg-5 p-sm-12">
                  <aps-form-input name="notifyPartyCodeSearch" id="notifyPartyCodeSearch" label="Notify Party Code"
                    [required]="true" [rightIcon]="'fa-search'" (onRightIcon)="searchNotifyPartyCode = true"
                    [disabled]="true" [(ngModel)]="
                      parentRef.formData.shippingDocumentDetails[0].notifyParty[0].notifyPartyCode
                    ">
                  </aps-form-input>
                </div>
                <div class="p-col-12 p-md-1 p-lg-1 p-sm-12 text-center">
                  <div class="text-size-14 text-color-dark-shade-1 p-py-4">OR</div>
                </div>
                <div class="p-col-12 p-md-6 p-sm-12">
                  <div class="p-py-3">
                    <button class="btn text-center btn btn-tertiary p-py-2" (click)="isNewNotifyParty = true">
                      <app-icon icon="fa-plus-square"></app-icon>
                      Add New Notify Party
                    </button>
                  </div>
                </div>
                <div class="p-md-4 p-sm-12 p-col-12" *ngIf="
                    parentRef.formData.shippingDocumentDetails[0].notifyParty[0].notifyPartyName
                  ">
                  <div class="background-color-dark-3 text-size-14 p-px-2 p-py-1 border-radius-4">
                    <div class="text-color-normal">Notify Party Name</div>
                    <div class="text-color-dark-shade-1">
                      {{
                      parentRef.formData.shippingDocumentDetails[0].notifyParty[0].notifyPartyName
                      }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="p-grid">
                <div class="p-md-4 p-sm-12 p-col-12" *ngIf="
                    parentRef.formData.shippingDocumentDetails[0].notifyParty[0]
                      .notifyPartyAddress1[0].address
                  ">
                  <div class="background-color-dark-3 text-size-14 p-px-2 p-py-1 border-radius-4">
                    <div class="text-color-normal">Notify Party Address1</div>
                    <div class="text-color-dark-shade-1">
                      {{
                      parentRef.formData.shippingDocumentDetails[0].notifyParty[0]
                      .notifyPartyAddress1[0].address
                      }}
                    </div>
                  </div>
                </div>
                <div class="p-md-4 p-sm-12 p-col-12" *ngIf="
                    parentRef.formData.shippingDocumentDetails[0].notifyParty[0]
                      .notifyPartyAddress2[0].address
                  ">
                  <div class="background-color-dark-3 text-size-14 p-px-2 p-py-1 border-radius-4">
                    <div class="text-color-normal">Notify Party Address2</div>
                    <div class="text-color-dark-shade-1">
                      {{
                      parentRef.formData.shippingDocumentDetails[0].notifyParty[0]
                      .notifyPartyAddress2[0].address
                      }}
                    </div>
                  </div>
                </div>
                <div class="p-md-4 p-sm-12 p-col-12" *ngIf="
                    parentRef.formData.shippingDocumentDetails[0].notifyParty[0]
                      .notifyPartyAddress3[0].address
                  ">
                  <div class="background-color-dark-3 text-size-14 p-px-2 p-py-1 border-radius-4">
                    <div class="text-color-normal">Notify Party Address3</div>
                    <div class="text-color-dark-shade-1">
                      {{
                      parentRef.formData.shippingDocumentDetails[0].notifyParty[0]
                      .notifyPartyAddress3[0].address
                      }}
                    </div>
                  </div>
                </div>
              </div>
            </form>

            <form name="form6" #form6="ngForm" class="supporting-documents" [apsHide]="
                activeStep && activeStep.displayLabel !== parentRef.stepperDetails.headings[5]
              ">
              <div class="p-grid">
                <div class="p-md-4 p-sm-12 p-col-12">
                  <div class="text-size-14 text-semi-bold text-color-dark-shade-1">
                    Document Type
                  </div>
                </div>
                <div class="p-md-4 p-sm-12 p-col-12">
                  <div class="text-size-14 text-semi-bold text-color-dark-shade-1">
                    Reference Number
                  </div>
                </div>
                <div class="p-md-4 p-sm-12 p-col-12">
                  <div class="text-size-14 text-semi-bold text-color-dark-shade-1">
                    Upload Documents
                    <span class="text-size-8 text-color-normal">&nbsp;Max 10MB each</span>
                  </div>
                </div>
                <div class="p-md-4 p-sm-12 p-col-12">
                  <p-checkbox name="billOfLading" id="billOfLading" label="Bill Of Lading" [binary]="true"
                    [(ngModel)]="parentRef.formData.supportingDocuments[0].billOfLading"
                    (change)="onChangeBillOfLading()">
                  </p-checkbox>
                </div>
                <div class="p-md-4 p-sm-12 p-col-12 p-py-0">
                  <aps-form-input name="billOfLadingRefNo" id="billOfLadingRefNo" label="Enter Ref. Number"
                    [(ngModel)]="parentRef.formData.supportingDocuments[0].billOfLadingRefNo"
                    [required]="parentRef.formData.supportingDocuments[0].billOfLading"
                    [disabled]="!parentRef.formData.supportingDocuments[0].billOfLading">
                  </aps-form-input>
                </div>
                <div class="p-md-4 p-sm-12 p-col-12">
                  <upload-form-control [hideDragDropContainerOnFIleUpload]="true"
                    [files]="parentRef.formData.supportingDocuments[0].billOfLadingDocument" (onUploaded)="
                      parentRef.formData.supportingDocuments[0].billOfLadingDocument = $event
                    " [required]="parentRef.formData.supportingDocuments[0].billOfLading"
                    [disabled]="!parentRef.formData.supportingDocuments[0].billOfLading">
                  </upload-form-control>
                </div>
                <div class="p-md-4 p-sm-12 p-col-12">
                  <p-checkbox name="undertaking" id="undertaking" label="Undertaking" [binary]="true"
                    [(ngModel)]="parentRef.formData.supportingDocuments[0].undertaking"
                    (change)="onChangeUndertaking()">
                  </p-checkbox>
                </div>
                <div class="p-md-4 p-sm-12 p-col-12 p-py-0">
                  <aps-form-input name="undertakingRefNo" id="undertakingRefNo" label="Enter Ref. Number"
                    [(ngModel)]="parentRef.formData.supportingDocuments[0].undertakingRefNo"
                    [required]="parentRef.formData.supportingDocuments[0].undertaking"
                    [disabled]="!parentRef.formData.supportingDocuments[0].undertaking">
                  </aps-form-input>
                </div>
                <div class="p-md-4 p-sm-12 p-col-12">
                  <upload-form-control [hideDragDropContainerOnFIleUpload]="true"
                    [files]="parentRef.formData.supportingDocuments[0].undertakingDocument" (onUploaded)="
                      parentRef.formData.supportingDocuments[0].undertakingDocument = $event
                    " [disabled]="!parentRef.formData.supportingDocuments[0].undertaking">
                  </upload-form-control>
                </div>
              </div>
            </form>

            <form name="form7" #form7="ngForm" class="clauses" [apsHide]="
                activeStep && activeStep.displayLabel !== parentRef.stepperDetails.headings[6]
              ">
              <div class="p-grid">
                <div class="p-col-12 text-center">
                  <div class="text-size-16 text-bold">Indemnity cum Declaration:</div>
                </div>
                <div class="p-col-12">
                  <div class="text-size-14 text-color-dark-shade-1">
                    We place on record that at our request and for our sole benefit you have joined
                    in signing a letter of guarantee to M/s

                    <div style="width: 20rem">
                      <aps-form-input name="corporateName" id="corporateName" label="Corporate Name"
                        [(ngModel)]="parentRef.formData.clauses[0].corporateName">
                      </aps-form-input>
                    </div>
                    against their delivery to us, the under mentioned goods, without production of
                    the relative Bill of Lading or other documents of title.
                  </div>
                </div>
                <div class="p-col-12">
                  <div class="inline-items">
                    <div class="item">
                      <div class="text-size-14 text-color-dark-shade-1 p-py-4 p-pr-2">
                        Bill of Lading No:
                      </div>
                    </div>
                    <div class="item">
                      <aps-form-input name="billOfLadingNo" id="billOfLadingNo" label="Bill of Lading No"
                        [(ngModel)]="parentRef.formData.clauses[0].billOfLadingNo">
                      </aps-form-input>
                    </div>
                    <div class="item">
                      <div class="text-size-14 text-color-dark-shade-1 p-py-4 p-pr-2">
                        Marks & Nos:
                      </div>
                    </div>
                    <div class="item">
                      <aps-form-input name="marksAndNo" id="marksAndNo" label="Marks And No"
                        [(ngModel)]="parentRef.formData.clauses[0].marksAndNo">
                      </aps-form-input>
                    </div>
                  </div>
                  <div class="inline-items">
                    <div class="item">
                      <div class="text-size-14 text-color-dark-shade-1 p-py-4 p-pr-2">
                        Packages [Nos]:
                      </div>
                    </div>
                    <div class="item">
                      <aps-form-input name="packagesNo" id="packagesNo" label="Packages No"
                        [(ngModel)]="parentRef.formData.clauses[0].packagesNo">
                      </aps-form-input>
                    </div>
                    <div class="item">
                      <div class="text-size-14 text-color-dark-shade-1 p-py-4 p-pr-2">Vessel:</div>
                    </div>
                    <div class="item">
                      <aps-form-input name="detailsOfVessel" id="detailsOfVessel" label="Details of Vessel"
                        [(ngModel)]="parentRef.formData.clauses[0].detailsOfVessel">
                      </aps-form-input>
                    </div>
                  </div>
                  <div class="inline-items">
                    <div class="item">
                      <div class="text-size-14 text-color-dark-shade-1 p-py-4 p-pr-2">
                        Description of Goods:
                      </div>
                    </div>
                    <div class="item">
                      <aps-form-input name="descriptionOfGoods" id="descriptionOfGoods" label="Description of Goods"
                        [(ngModel)]="parentRef.formData.clauses[0].descriptionOfGoods">
                      </aps-form-input>
                    </div>
                    <div class="item">
                      <div class="text-size-14 text-color-dark-shade-1 p-py-4 p-pr-2">
                        Invoice Value:
                      </div>
                    </div>
                    <div class="item p-px-2">
                      <aps-form-input name="invoiceCcy" id="invoiceCcy" label="CCY"
                        [(ngModel)]="parentRef.formData.clauses[0].invoiceCcy">
                      </aps-form-input>
                    </div>
                    <div class="item">
                      <aps-form-input name="invoiceAmount" id="invoiceAmount" label="Amount"
                        [(ngModel)]="parentRef.formData.clauses[0].invoiceAmount">
                      </aps-form-input>
                    </div>
                  </div>
                </div>
                <div class="p-col-12">
                  <div class="text-size-14 text-color-dark-shade-1">
                    In consideration of your having complied with our request and having signed the
                    above said letter of guarantee we hereby unconditionally agree to indemnify you
                    and keep you indemnified against all consequences thereof and against all
                    demands, actions, proceedings, liabilities, claims, damages, losses, costs and
                    expenses, including any losses due to fluctuation in the exchange rate, which
                    you may suffer or incur by reason of your having signed the said letter of
                    guarantee as aforesaid or the delivery of the said goods to us or otherwise in
                    connection therewith and to pay to you immediately on demand losses costs and
                    expenses made or suffered by you in consequence thereof or arising there from
                    and that we will on receipt of the said Bill of Lading [or other documents of
                    title] either deliver it to you duly endorsed or procure the return or discharge
                    of the said guarantee. In the event of holders of the relative bills of lading
                    demanding payments from you or through, the vessel agents; you are hereby
                    authorised to meet such payments up to the maximum amount for which you have
                    countersigned our guarantee, debiting such payments to our current account or to
                    any other account which we may have with you, notwithstanding the fact that such
                    debits create overdrafts. We hereby agree to pay off such overdrafts on demand.
                    We hereby authorise you to retire the bills on receipt of the relevant original
                    documents from your correspondent without further reference to us,
                    notwithstanding any discrepancies whatsoever that may appear therein. All such
                    discrepancies are hereby accept ed. You may forward the original Bill of Lading
                    to the said vessel agent and obtain cancellation of the shipping guarantee. We
                    hereby authorise you to debit our current account or any other account
                    maintained by us with the bill value or shortfall that may arise at the time of
                    retirement of the said bills, notwithstanding the fact that such debits may
                    create overdrafts. We further confirm that the value of the goods in the
                    original invoice will not be in excess of the value of the goods as indicated in
                    the guarantee bond. We undertake to furnish to you on demand all Exchange
                    Control and Import Control documents that you may require in connection with the
                    importation of the said goods and the payment there of by us. As additional
                    security we enclose our cheque for/enclose cash for/authorise you to debit our
                    account and credit yourselves with the sum of
                  </div>
                  <div class="inline-items">
                    <div class="item p-px-2">
                      <aps-form-input name="creditCcy" id="creditCcy" label="CCY"
                        [(ngModel)]="parentRef.formData.clauses[0].creditCcy">
                      </aps-form-input>
                    </div>
                    <div class="item">
                      <aps-form-input name="creditAmount" id="creditAmount" label="Amount"
                        [(ngModel)]="parentRef.formData.clauses[0].creditAmount">
                      </aps-form-input>
                    </div>
                  </div>
                  <div class="text-size-14 text-color-dark-shade-1">
                    Such amount to be held by you as collateral security for the due discharge of
                    our liabilities under this indemnity and we hereby agree that you may at your
                    sole discretion and without prejudice to, or in any way limiting other rights
                    which you may have for recovery against us, apply without notice this deposit or
                    any part of it, in or towards redemption of our liability on any bill drawn in
                    connection with the above mentioned goods that may arrive through you or any
                    other Bank or of any liability of ours under this indemnity. We hereby further
                    agree that until such time as we meet our obligations hereunder, the goods
                    cleared by us as aforesaid or the sale proceeds thereof are to be held by us in
                    trust for your Bank and such sale proceeds are to be held available to you. We
                    also confirm that until the goods cleared by us as aforesaid are sold, they
                    shall be properly insured against fire ,theft and all other normal risks or such
                    other causes and contingencies as you may require and we agree to assign to you
                    the policy of insurance if and when demanded by you and that until performance
                    of our obligations hereunder, the insurance money payable under such policy is
                    to be held as available to you and if received by us shall be held by us in
                    trust on your behalf until the same is paid to you. We further authorise you to
                    charge your guarantee commission and charges to our account. The undertaking and
                    authorities hereby given and conferred shall be irrevocable and all such
                    undertakings and authorities shall continue in force until all moneys due by us
                    to you at any time and from to time to time shall be paid in full.
                  </div>
                </div>
              </div>
            </form>

            <form name="form8" #form8="ngForm" class="terms-and-condition" [apsHide]="
                activeStep && activeStep.displayLabel !== parentRef.stepperDetails.headings[7]
              ">
              <div class="p-grid">
                <div class="p-col-12">
                  <p-checkbox name="agreeToTermsAndCondition" id="agreeToTermsAndCondition"
                    label="I agree to terms and conditions" [binary]="true"
                    [(ngModel)]="parentRef.formData.termsAndCondition[0].agreeToTermsAndCondition"
                    [required]="true"></p-checkbox>
                  <a class="text-size-14 text-bold pointer p-p-1" (click)="isTermsAndCondition = true">Click Here</a>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </ng-container>
</div>

<ng-template #loadingTemplate>
  <app-loading-spinner></app-loading-spinner>
</ng-template>