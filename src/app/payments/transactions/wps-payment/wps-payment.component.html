<div class="container">
  <div class="p-grid g-margin-x" *ngIf="!loading; else loadingTemplate">
    <div class="p-md-3 p-sm-12 p-col-12">
      <div class="aps-card aps-filled-card p-p-3 pointer" (click)="initiateWpsPayment('upload')">
        <div
          class="text-size-18 text-center text-color-inverted text-semi-bold border-bottom aps-pt-12 p-pb-3"
        >
          {{ 'WPS Payment Upload' | apsTranslate }}
        </div>
        <div class="p-pt-3 text-size-13 text-color-inverted border-top">
          {{ 'Click this card to initiate WPS payment through file upload.' | apsTranslate }}
        </div>
      </div>
      <div
        class="aps-card border-primary aps-filled-card-sm p-p-3 p-mt-3 pointer"
        (click)="initiateWpsPayment('manual')"
      >
        <div
          class="text-size-18 text-center text-color-primary text-semi-bold border-bottom aps-pt-12 p-pb-3"
        >
          {{ 'WPS Payment Manual' | apsTranslate }}
        </div>
        <div class="p-pt-3 text-size-13 text-color-light-shade-1 border-top">
          {{ 'Click this card to initiate WPS payment through the entry screen.' | apsTranslate }}
        </div>
      </div>
    </div>
    <div class="p-md-9 p-sm-12 p-col-12 p-p-0">
      <div class="p-grid">
        <div class="p-md-6 p-sm-12 p-col-12">
          <div class="aps-card p-p-3">
            <div class="left-right-container">
              <div class="left-container text-size-14 text-bold">
                {{ 'File Upload Status' | apsTranslate }}
              </div>
              <div class="right-container">
                <aps-custom-select
                  name="duration"
                  id="duration"
                  label=""
                  [data]="durationList"
                  [(ngModel)]="fileUploadStatusDuration"
                  [value]="fileUploadStatusDuration"
                  (change)="onChangeFileUploadStatusDuration($event)"
                  [showLabel]="false"
                ></aps-custom-select>
              </div>
            </div>
            <div class="p-grid g-margin">
              <div class="p-md-3 p-sm-6 p-col-6">
                <div class="background-color-dark-3 p-p-2 aps-h-100p">
                  <div class="text-size-13 text-bold">
                    {{ landingPageData.fileUploadStatus.corporatePending }}
                  </div>
                  <div class="text-size-12">{{ 'Pending' | apsTranslate }}</div>
                </div>
              </div>

              <div class="p-md-3 p-sm-6 p-col-6">
                <div class="background-color-dark-3 p-p-2 aps-h-100p">
                  <div class="text-size-13 text-bold">
                    {{ landingPageData.fileUploadStatus.corporateRejected }}
                  </div>
                  <div class="text-size-12">{{ 'Rejected' | apsTranslate }}</div>
                </div>
              </div>

              <div class="p-md-3 p-sm-6 p-col-6">
                <div class="background-color-dark-3 p-p-2 aps-h-100p">
                  <div class="text-size-13 text-bold">
                    {{ landingPageData.fileUploadStatus.corporateAuthorized }}
                  </div>
                  <div class="text-size-12">{{ 'Authorized' | apsTranslate }}</div>
                </div>
              </div>

              <div class="p-md-3 p-sm-6 p-col-6">
                <div class="background-color-dark-3 p-p-2 aps-h-100p">
                  <div class="text-size-13 text-bold">
                    {{ landingPageData.fileUploadStatus.sendToBankCompleted }}
                  </div>
                  <div class="text-size-12">{{ 'Sent to Bank Completed' | apsTranslate }}</div>
                </div>
              </div>
            </div>

            <div class="text-size-13 p-my-2">
              <span class="text-bold">{{ 'Note' | apsTranslate }}:</span>
              {{
                'Count displayed in "Corporate Pending" is as on current system date.'
                  | apsTranslate
              }}
            </div>

            <div class="border-bottom p-my-3"></div>

            <div class="left-right-container">
              <div class="left-container text-size-14 text-bold">
                {{ 'Authorized Transaction Status' | apsTranslate }}
              </div>
              <div class="right-container">
                <aps-custom-select
                  name="duration"
                  id="duration"
                  label=""
                  [data]="durationList"
                  [(ngModel)]="authorizedTransactionStatusDuration"
                  [value]="authorizedTransactionStatusDuration"
                  (change)="onChangeAuthorizedTransactionStatusDuration($event)"
                  [showLabel]="false"
                ></aps-custom-select>
              </div>
            </div>
            <div class="p-grid g-margin">
              <div class="p-md-3 p-sm-6 p-col-6">
                <div class="background-color-dark-3 p-p-2">
                  <div class="text-size-13 text-bold">
                    {{ landingPageData.authorizedTransactionStatus.processing }}
                  </div>
                  <div class="text-size-12">{{ 'Processing' | apsTranslate }}</div>
                </div>
              </div>

              <div class="p-md-3 p-sm-6 p-col-6">
                <div class="background-color-dark-3 p-p-2">
                  <div class="text-size-13 text-bold">
                    {{ landingPageData.authorizedTransactionStatus.paid }}
                  </div>
                  <div class="text-size-12">{{ 'Paid' | apsTranslate }}</div>
                </div>
              </div>

              <div class="p-md-3 p-sm-6 p-col-6">
                <div class="background-color-dark-3 p-p-2">
                  <div class="text-size-13 text-bold">
                    {{ landingPageData.authorizedTransactionStatus.rejected }}
                  </div>
                  <div class="text-size-12">{{ 'Rejected' | apsTranslate }}</div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="p-md-6 p-sm-12 p-col-12">
          <div class="aps-card p-p-3">
            <app-insights [insights]="landingPageData.insights" height="221"> </app-insights>
          </div>
        </div>
      </div>
    </div>
    <div class="p-col-12">
      <div class="left-right-container aps-w-100p overflow-x-scroll p-pb-1">
        <div class="left-container">
          <div class="inline-items text-size-14">
            <div class="item p-mr-3" *ngFor="let tab of landingPageData.listingTabs">
              <div
                class="aps-card pointer p-py-2 p-px-4"
                [ngClass]="{ 'aps-card-primary': selectedTab.header == tab.header }"
                (click)="changeActiveTab(tab)"
              >
                {{ tab.header | apsTranslate }}&nbsp;({{ tab.count }})
              </div>
            </div>
          </div>
        </div>
        <div class="right-container">
          <div class="toggle-select-container p-ml-2 hide-on-mobile">
            <div
              class="action pointer text-color-dark-shade-1"
              (click)="listingType = 'grid'"
              [ngClass]="{ active: listingType === 'grid' }"
            >
              <app-icon icon="fa-list" class="app-icon"></app-icon>
            </div>
            <div
              class="action pointer text-color-dark-shade-1"
              (click)="listingType = 'card'"
              [ngClass]="{ active: listingType === 'card' }"
            >
              <app-icon icon="fa-th-large" class="app-icon"></app-icon>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="p-col-12">
      <div class="aps-card aps-h-400">
        <div class="aps-card-header overflow-visible">
          <div class="left-right-container p-px-3 aps-py-12">
            <div class="left-container"></div>
            <div class="right-container">
              <app-grid-listing-tools
                (changeFloatingFilter)="gridListing ? gridListing.changeFloatFilter($event) : null"
                (filterRecords)="gridListing ? gridListing.onFilter($event) : null"
                (applyColDefs)="gridListing ? gridListing.onApplyConfig($event) : null"
                [colDefs]="gridListing && gridListing.columnDefs ? gridListing.columnDefs : []"
                [gridRef]="gridListing"
                [columnConfig]="true"
                [moreOptions]="true"
              ></app-grid-listing-tools>
            </div>
          </div>
        </div>
        <div class="aps-card-body" *ngIf="!loadingList; else loadingTemplate">
          <app-ag-grid-listing
            #wpsGridListing
            [colDefUrl]="selectedTab.colDefsUrl"
            [colDefReq]="selectedTab.colDefReq"
            [rowDefUrl]="selectedTab.rowDefUrl"
            [gridOptions]="gridOptions"
            [context]="{ componentParent: this }"
            [apsHide]="listingType == 'card'"
          ></app-ag-grid-listing>

          <ng-container>
            <div class="card-list border-top" *ngIf="listingType == 'card'">
              <div class="p-grid p-p-2">
                <!-- <div
                  class="p-md-4 p-sm-12 p-col-12"
                  *ngFor="let data of gridListing.rowData; let i = index"
                >
                  <div class="aps-card text-size-12 p-p-2">
                    <div class="p-grid">
                      <ng-container *ngFor="let field of gridListing.columnDefs; let i = index">
                        <div class="p-col-12" *ngIf="gridListing.columnDefs[i].isShowOnCardView">
                          <div class="">
                            {{
                              data[gridListing.columnDefs[i].field]
                                ? data[gridListing.columnDefs[i].field]
                                : '-'
                            }}
                          </div>
                        </div>
                      </ng-container>
                    </div>
                  </div>
                </div> -->
                <div class="p-col-12" *ngFor="let data of gridListing.rowData; let i = index">
                  <div class="aps-card text-size-12">
                    <div class="card-header">
                      <div class="p-grid">
                        <div class="p-col-11 p-p-0">
                          <div class="p-grid">
                            <div class="p-md-3 p-sm-12 p-col-12">
                              <div class="text-bold">
                                {{ gridListing.columnDefs[0].headerName }}
                              </div>
                              <div class="">{{ data[gridListing.columnDefs[0].field] }}</div>
                            </div>
                            <div class="p-md-3 p-sm-12 p-col-12">
                              <div class="text-bold">
                                {{ gridListing.columnDefs[1].headerName }}
                              </div>
                              <div class="">{{ data[gridListing.columnDefs[1].field] }}</div>
                            </div>
                            <div class="p-md-3 p-sm-12 p-col-12">
                              <div class="text-bold">
                                {{ gridListing.columnDefs[2].headerName }}
                              </div>
                              <div class="">{{ data[gridListing.columnDefs[2].field] }}</div>
                            </div>
                            <div class="p-md-3 p-sm-12 p-col-12">
                              <div class="text-bold">
                                {{ gridListing.columnDefs[3].headerName }}
                              </div>
                              <div class="">{{ data[gridListing.columnDefs[3].field] }}</div>
                            </div>
                          </div>
                        </div>
                        <div class="p-col-1 p-p-3 text-right">
                          <app-icon
                            [icon]="data.isShow ? 'fa-chevron-up' : 'fa-chevron-down'"
                            styleClasses="text-size-14 pointer"
                            (click)="data.isShow = !data.isShow"
                          ></app-icon>
                        </div>
                      </div>
                    </div>
                    <div class="card-body border-top" *ngIf="data.isShow">
                      <div class="p-grid">
                        <ng-container *ngFor="let field of gridListing.columnDefs; let i = index">
                          <div
                            class="p-md-3 p-sm-12 p-col-12 p-p-0"
                            *ngIf="gridListing.columnDefs[i].field != 'actions'"
                          >
                            <div class="p-p-2" *ngIf="i >= 4">
                              <div class="text-bold">
                                {{ gridListing.columnDefs[i].headerName }}
                              </div>
                              <div class="">{{ data[gridListing.columnDefs[i].field] }}</div>
                            </div>
                          </div>
                        </ng-container>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="left-right-container p-py-2 p-px-3" *ngIf="listType === 'card'">
              <div class="left-container"></div>
              <div class="right-container">
                <button class="btn btn-sm btn-tertiary p-mr-3">
                  <app-icon
                    icon="fa-chevron-left"
                    (click)="previous()"
                    [disabled]="this.currentPage <= 1"
                  ></app-icon>
                </button>
                <button class="btn btn-sm btn-tertiary">
                  <app-icon
                    icon="fa-chevron-right"
                    (click)="next()"
                    [disabled]="this.currentPage >= this.numberOfPages"
                  ></app-icon>
                </button>
              </div>
            </div>
          </ng-container>
        </div>
      </div>
    </div>
  </div>
</div>

<ng-template #loadingTemplate>
  <app-loading-spinner *ngIf="loading"></app-loading-spinner>
  <p class="p-py-6 text-center" *ngIf="!loading && loadingList">
    {{ 'Loading' | apsTranslate }}...
  </p>
</ng-template>
