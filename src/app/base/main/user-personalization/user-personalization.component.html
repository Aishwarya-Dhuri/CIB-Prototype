<div class="container p-mt-3">
  <div class="p-grid g-margin-x" *ngIf="!loading; else loadingTemplate">
    <!-- User Logo and Tabs Container -->
    <div class="p-col-12 p-md-3 p-lg-3 p-py-0">
      <div class="aps-card p-mb-3">
        <!-- logo and progress bar -->
        <div class="p-grid">
          <div class="p-col-12 p-p-3">
            <div class="p-grid">
              <div class="profile-pic">
                <img
                  class="border-radius-4"
                  id="profileImage"
                  [src]="
                    personalizationData.userDetails.profilePicUrl
                      ? personalizationData.userDetails.profilePicUrl
                      : './../../../assets/images/avatar.jpg'
                  "
                  alt=""
                />
                <app-icon
                  (click)="fileDropRef.click()"
                  icon="fa-camera-alt"
                  class="cam-icon text-size-12 pointer"
                >
                </app-icon>
                <input
                  type="file"
                  class="input"
                  #fileDropRef
                  onchange="document.getElementById('profileImage').src = window.URL.createObjectURL(this.files[0])"
                  (change)="updateProfilePic($event.target.files)"
                />
              </div>
              <div class="p-col-8 p-px-3">
                <div class="text-size-16 text-bold">
                  {{ personalizationData.userDetails.firstName }}
                  &nbsp;
                  {{ personalizationData.userDetails.lastName }}
                </div>
                <div class="text-size-10">{{ personalizationData.userDetails.designation }}</div>
              </div>
            </div>
          </div>
          <div class="p-col-12 p-px-3 p-py-0">
            <p-progressBar [value]="getOverallProgress()" [showValue]="false"></p-progressBar>
            <span class="text-size-10 float-right">{{ getOverallProgress() }}%</span>
          </div>
        </div>
        <!-- tabs -->
        <div class="p-grid">
          <div
            class="p-col-12 border-radius-4 pointer"
            *ngFor="let tab of tabDetails; let i = index"
            (mouseover)="tab.isHover = true"
            (mouseout)="tab.isHover = false"
            (click)="onTabClick(i)"
            [ngClass]="{
              'p-mt-3': i == 0,
              'p-mt-2': i != 0,
              'border-primary': tab.isActive,
              'text-color-primary': tab.isActive || tab.isHover,
              'background-color-primary-light-shade-1': tab.isHover && !tab.isActive
            }"
          >
            <div class="p-grid">
              <div class="p-col-2 p-p-0 text-size-16">
                <app-icon [icon]="tab.icon" class="p-px-2"></app-icon>
              </div>
              <div class="p-col-10 p-p-0 text-size-14 text-semi-bold">
                {{ tab.displayName }}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Tab Details Container -->
    <div class="p-col-12 p-md-9 p-lg-9 p-py-0">
      <ng-container *ngFor="let subTab of selectedTab.subTabs">
        <ng-container
          [ngTemplateOutlet]="this[subTab.templateName]"
          [ngTemplateOutletContext]="{ data: subTab }"
        ></ng-container>
      </ng-container>
    </div>
  </div>

  <!-- User Details -->
  <ng-template #userDetails let-data="data">
    <div class="aps-card">
      <div class="p-grid">
        <div class="p-col-12 p-px-3 p-py-2">
          <div
            class="p-grid"
            (click)="!data.isEdit ? (data.isExpand = isExpanded(data.isExpand, $event)) : null"
          >
            <div class="p-col-6 p-pb-2 p-px-0 text-size-16 text-semi-bold">User Details</div>
            <div class="p-col-6 p-pb-2 p-px-0 text-size-16" [ngClass]="{ 'p-py-1': data.isEdit }">
              <app-icon
                *ngIf="!data.isEdit"
                class="pointer float-right"
                [icon]="data.isExpand ? 'fa-chevron-up' : 'fa-chevron-down'"
                (click)="data.isExpand = isExpanded(data.isExpand, $event)"
              >
              </app-icon>
              <app-icon
                *ngIf="!data.isEdit"
                (click)="data.isEdit = true; data.isExpand = true; onEditClick($event)"
                icon="fa-pencil"
                class="float-right pointer p-px-3"
              >
              </app-icon>
              <button
                class="btn btn-md btn-primary float-right"
                *ngIf="data.isEdit"
                (click)="onSaveClick($event); data.isEdit = false"
              >
                SAVE
              </button>
              <button
                class="btn btn-md btn-tertiary p-mx-2 float-right"
                *ngIf="data.isEdit"
                (click)="data.isEdit = false"
              >
                CANCEL
              </button>
            </div>
          </div>
          <div class="p-grid" *ngIf="data.isExpand">
            <div class="p-col-12 p-md-4 p-lg-4 border-top">
              <div class="p-p-2" [ngClass]="{ 'background-color-disabled': data.isEdit }">
                <div class="text-size-12 text-color-light-shade-1">User ID</div>
                <div class="text-size-14">{{ personalizationData.userDetails.userId }}</div>
              </div>
            </div>
            <div class="p-col-12 p-md-4 p-lg-4" [ngClass]="{ 'border-top': viewport == 'web' }">
              <div class="p-p-2" *ngIf="!data.isEdit">
                <div class="text-size-12 text-color-light-shade-1">Alias Name</div>
                <div class="text-size-14">{{ personalizationData.userDetails.userAlias }}</div>
              </div>
              <div class="p-p-0" *ngIf="data.isEdit">
                <aps-form-input
                  id="aliasName"
                  label="Alias Name"
                  name="aliasName"
                  [(ngModel)]="personalizationEditData.userDetails.userAlias"
                >
                </aps-form-input>
              </div>
            </div>
            <div
              class="p-col-12 p-md-4 p-lg-4"
              [ngClass]="{ 'border-top': viewport == 'web' }"
            ></div>
            <div class="p-col-12 p-md-4 p-lg-4">
              <div class="p-p-2" [ngClass]="{ 'background-color-disabled': data.isEdit }">
                <div class="text-size-12 text-color-light-shade-1">First Name</div>
                <div class="text-size-14">{{ personalizationData.userDetails.firstName }}</div>
              </div>
            </div>
            <div class="p-col-12 p-md-4 p-lg-4">
              <div class="p-p-2" [ngClass]="{ 'background-color-disabled': data.isEdit }">
                <div class="text-size-12 text-color-light-shade-1">Last Name</div>
                <div class="text-size-14">{{ personalizationData.userDetails.lastName }}</div>
              </div>
            </div>
            <div class="p-col-12 p-md-4 p-lg-4">
              <div class="p-p-2" [ngClass]="{ 'background-color-disabled': data.isEdit }">
                <div class="text-size-12 text-color-light-shade-1">Gender</div>
                <div class="text-size-14">{{ personalizationData.userDetails.genderName }}</div>
              </div>
            </div>
            <div class="p-col-12 p-md-4 p-lg-4">
              <div class="p-p-2" [ngClass]="{ 'background-color-disabled': data.isEdit }">
                <div class="text-size-12 text-color-light-shade-1">Employee Code</div>
                <div class="text-size-14">{{ personalizationData.userDetails.employeeCode }}</div>
              </div>
            </div>
            <div class="p-col-12 p-md-4 p-lg-4">
              <div class="p-p-2" [ngClass]="{ 'background-color-disabled': data.isEdit }">
                <div class="text-size-12 text-color-light-shade-1">Designation</div>
                <div class="text-size-14">{{ personalizationData.userDetails.designation }}</div>
              </div>
            </div>
            <div class="p-col-12 p-md-4 p-lg-4">
              <div class="p-p-2" [ngClass]="{ 'background-color-disabled': data.isEdit }">
                <div class="text-size-12 text-color-light-shade-1">Department</div>
                <div class="text-size-14">{{ personalizationData.userDetails.department }}</div>
              </div>
            </div>
            <div class="p-col-12 p-md-4 p-lg-4 p-pb-0">
              <div class="p-p-2" [ngClass]="{ 'background-color-disabled': data.isEdit }">
                <div class="text-size-12 text-color-light-shade-1">Category</div>
                <div class="text-size-14">{{ personalizationData.userDetails.categoryName }}</div>
              </div>
            </div>
            <div class="p-col-12 p-md-4 p-lg-4 p-pb-0">
              <div class="p-p-2" [ngClass]="{ 'background-color-disabled': data.isEdit }">
                <div class="text-size-12 text-color-light-shade-1">Profile Name</div>
                <div class="text-size-14">{{ personalizationData.userDetails.profileName }}</div>
              </div>
            </div>
            <div class="p-col-12 p-md-4 p-lg-4 p-pb-0">
              <div class="p-p-2" [ngClass]="{ 'background-color-disabled': data.isEdit }">
                <div class="text-size-12 text-color-light-shade-1">Corporate Branch</div>
                <div class="text-size-14">
                  {{ personalizationData.userDetails.corporateBranchName }}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-template>

  <!-- Contact Details -->
  <ng-template #addressDetails let-data="data">
    <div class="aps-card p-mt-3">
      <div class="p-grid">
        <div class="p-col-12 p-px-3 p-py-2">
          <div
            class="p-grid"
            (click)="!data.isEdit ? (data.isExpand = isExpanded(data.isExpand, $event)) : null"
          >
            <div class="p-col-6 p-pb-2 p-px-0 text-size-16 text-semi-bold">Contact Details</div>
            <div class="p-col-6 p-pb-2 p-px-0 text-size-16" [ngClass]="{ 'p-py-1': data.isEdit }">
              <app-icon
                *ngIf="!data.isExpand"
                (click)="data.isExpand = isExpanded(data.isExpand, $event)"
                icon="fa-chevron-down"
                class="float-right pointer"
              >
              </app-icon>
              <app-icon
                *ngIf="data.isExpand && !data.isEdit"
                (click)="data.isExpand = isExpanded(data.isExpand, $event)"
                icon="fa-chevron-up"
                class="float-right pointer"
              >
              </app-icon>
              <app-icon
                *ngIf="!data.isEdit"
                (click)="data.isEdit = true; data.isExpand = true; onEditClick($event)"
                icon="fa-pencil"
                class="float-right pointer p-px-3"
              >
              </app-icon>
              <button
                class="btn btn-md btn-primary float-right"
                *ngIf="data.isEdit"
                (click)="onSaveClick($event); data.isEdit = false"
              >
                SAVE
              </button>
              <button
                class="btn btn-md btn-tertiary p-mx-2 float-right"
                *ngIf="data.isEdit"
                (click)="data.isEdit = false"
              >
                CANCEL
              </button>
            </div>
          </div>
          <div class="p-grid" *ngIf="data.isExpand">
            <div class="p-col-12 p-md-4 p-lg-4 border-top">
              <div class="p-p-2" *ngIf="!data.isEdit">
                <div class="text-size-12 text-color-light-shade-1">Contact No</div>
                <div class="text-size-14">{{ personalizationData.userDetails.telephoneNo }}</div>
              </div>
              <div class="p-p-0" *ngIf="data.isEdit">
                <aps-form-input
                  id="contactNo"
                  label="Contact No"
                  name="contactNo"
                  [(ngModel)]="personalizationEditData.userDetails.telephoneNo"
                >
                </aps-form-input>
              </div>
            </div>
            <div class="p-col-12 p-md-4 p-lg-4" [ngClass]="{ 'border-top': viewport == 'web' }">
              <div class="p-p-2" *ngIf="!data.isEdit">
                <div class="text-size-12 text-color-light-shade-1">Email ID</div>
                <div class="text-size-14">{{ personalizationData.userDetails.email }}</div>
              </div>
              <div class="p-p-0" *ngIf="data.isEdit">
                <aps-form-input
                  id="emailId"
                  label="Email ID"
                  name="emailId"
                  [(ngModel)]="personalizationEditData.userDetails.email"
                >
                </aps-form-input>
              </div>
            </div>
            <div class="p-col-12 p-md-4 p-lg-4" [ngClass]="{ 'border-top': viewport == 'web' }">
              <div class="p-p-2" *ngIf="!data.isEdit">
                <div class="text-size-12 text-color-light-shade-1">Address</div>
                <div class="inline-block text-size-14">
                  {{ personalizationData.userDetails.address1 }},
                </div>
                <div class="inline-block text-size-14">
                  {{ personalizationData.userDetails.address2 }},
                </div>
                <div class="inline-block text-size-14">
                  {{ personalizationData.userDetails.address3 }}
                </div>
              </div>
              <div class="p-p-0" *ngIf="data.isEdit">
                <aps-form-input
                  id="address1"
                  label="Address 1"
                  name="address1"
                  [(ngModel)]="personalizationEditData.userDetails.address1"
                >
                </aps-form-input>
                <aps-form-input
                  id="address2"
                  label="Address 2"
                  name="address2"
                  [showLabel]="false"
                  [(ngModel)]="personalizationEditData.userDetails.address2"
                >
                </aps-form-input>
                <aps-form-input
                  id="address3"
                  label="Address 3"
                  name="address3"
                  [showLabel]="false"
                  [(ngModel)]="personalizationEditData.userDetails.address3"
                >
                </aps-form-input>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-template>

  <!-- Login Restrictions -->
  <ng-template #loginRestrictionDetails let-data="data">
    <div class="aps-card p-mt-3">
      <div class="p-grid">
        <div class="p-col-12 p-px-0 p-py-2">
          <div
            class="p-grid"
            (click)="!data.isEdit ? (data.isExpand = isExpanded(data.isExpand, $event)) : null"
          >
            <div class="p-col-6 p-pb-2 p-px-3 text-size-16 text-semi-bold">Login Restrictions</div>
            <div class="p-col-6 p-pb-2 p-px-3 text-size-16">
              <app-icon
                *ngIf="!data.isExpand"
                (click)="data.isExpand = isExpanded(data.isExpand, $event)"
                icon="fa-chevron-down"
                class="float-right pointer"
              >
              </app-icon>
              <app-icon
                *ngIf="data.isExpand"
                (click)="data.isExpand = isExpanded(data.isExpand, $event)"
                icon="fa-chevron-up"
                class="float-right pointer"
              >
              </app-icon>
            </div>
          </div>
          <div class="p-grid" *ngIf="data.isExpand">
            <div class="p-col-12 p-p-0 aps-h-320">
              <app-ag-grid-listing
                id="loginRestrictions"
                colDefUrl="commons/userPersonalization/private/loginRestrictionColDefs"
                [rowData]="personalizationData.userDetails.corporateLoginRestrictions"
                [gridOptions]="{ rowModelType: 'clientSide', pagination: false }"
              >
              </app-ag-grid-listing>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-template>

  <!-- Security Criteria -->
  <ng-template #securityCriteriaDetails let-data="data">
    <div class="aps-card p-my-3">
      <div class="p-grid">
        <div class="p-col-12 p-px-3 p-py-2">
          <div
            class="p-grid"
            (click)="!data.isEdit ? (data.isExpand = isExpanded(data.isExpand, $event)) : null"
          >
            <div class="p-col-6 p-pb-2 p-px-0 text-size-16 text-semi-bold">Security Criteria</div>
            <div class="p-col-6 p-pb-2 p-px-0 text-size-16">
              <app-icon
                *ngIf="!data.isExpanded"
                (click)="data.isExpand = isExpanded(data.isExpand, $event)"
                icon="fa-chevron-down"
                class="float-right pointer"
              >
              </app-icon>
              <app-icon
                *ngIf="data.isExpanded"
                (click)="data.isExpand = isExpanded(data.isExpand, $event)"
                icon="fa-chevron-up"
                class="float-right pointer"
              >
              </app-icon>
            </div>
          </div>
          <div class="p-grid" *ngIf="data.isExpand">
            <div class="p-col-12 p-md-4 p-lg-4 border-top">
              <div class="text-size-12 text-color-light-shade-1">IP Mapping Restriction</div>
              <div class="text-size-14 p-px-2 p-py-1">
                <p-radioButton
                  name="ipMappingRestriction"
                  value="Yes"
                  label="Yes"
                  [(ngModel)]="personalizationData.userDetails.ipMappingRestriction"
                  [disabled]="true"
                >
                </p-radioButton>
              </div>
              <div class="text-size-14 p-px-2 p-py-1">
                <p-radioButton
                  name="ipMappingRestriction"
                  value="No"
                  label="No"
                  [(ngModel)]="personalizationData.userDetails.ipMappingRestriction"
                  [disabled]="true"
                >
                </p-radioButton>
              </div>
            </div>
            <div class="p-col-12 p-md-8 p-lg-8" [ngClass]="{ 'border-top': viewport == 'web' }">
              <div class="text-size-12 text-color-light-shade-1">User Type Header</div>
              <div class="text-size-14 p-px-2 p-py-1">
                <p-radioButton
                  name="userTypeHeader"
                  value="Self Authorizer"
                  label="Self Authorizer"
                  [(ngModel)]="personalizationData.userDetails.userAuthorize"
                  [disabled]="true"
                >
                </p-radioButton>
              </div>
              <div class="text-size-14 p-px-2 p-py-1">
                <p-radioButton
                  name="userTypeHeader"
                  value="Normal User"
                  label="Normal User"
                  [(ngModel)]="personalizationData.userDetails.userAuthorize"
                  [disabled]="true"
                >
                </p-radioButton>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-template>

  <!-- Corporate Main -->
  <ng-template #corporateMainDetails let-data="data">
    <div class="aps-card">
      <div class="p-grid">
        <div class="p-col-12 p-px-3 p-py-2">
          <div
            class="p-grid"
            (click)="!data.isEdit ? (data.isExpand = isExpanded(data.isExpand, $event)) : null"
          >
            <div class="p-col-6 p-pb-2 p-px-0 text-size-16 text-semi-bold">Corporate Main</div>
            <div class="p-col-6 p-pb-2 p-px-0 text-size-16" [ngClass]="{ 'p-py-1': data.isEdit }">
              <app-icon
                *ngIf="!data.isExpand"
                (click)="data.isExpand = isExpanded(data.isExpand, $event)"
                icon="fa-chevron-down"
                class="float-right pointer"
              >
              </app-icon>
              <app-icon
                *ngIf="data.isExpand && !data.isEdit"
                (click)="data.isExpand = isExpanded(data.isExpand, $event)"
                icon="fa-chevron-up"
                class="float-right pointer"
              >
              </app-icon>
              <app-icon
                *ngIf="!data.isEdit"
                (click)="data.isEdit = true; data.isExpand = true; onEditClick($event)"
                icon="fa-pencil"
                class="float-right pointer p-px-3"
              >
              </app-icon>
              <button
                class="btn btn-md btn-primary float-right"
                *ngIf="data.isEdit"
                (click)="onSaveClick($event); data.isEdit = false"
              >
                SAVE
              </button>
              <button
                class="btn btn-md btn-tertiary p-mx-2 float-right"
                *ngIf="data.isEdit"
                (click)="data.isEdit = false"
              >
                CANCEL
              </button>
            </div>
          </div>
          <div class="p-grid" *ngIf="data.isExpand">
            <div class="p-col-12 p-md-4 p-lg-4 p-p-3 border-top" *ngIf="isGroupUser">
              <div class="text-size-12 text-color-light-shade-1">Group Name</div>
              <div class="text-size-14">
                {{ personalizationData.userDetails.groupName }}
              </div>
            </div>
            <div
              class="p-col-12 p-md-4 p-lg-4 p-p-3"
              [ngClass]="{ 'border-top': viewport == 'web' }"
            >
              <div class="text-size-12 text-color-light-shade-1">Corporate Code</div>
              <div class="text-size-14">
                {{ personalizationData.userDetails.corporateCode }}
              </div>
            </div>
            <div
              class="p-col-12 p-md-4 p-lg-4 p-p-3"
              [ngClass]="{ 'border-top': viewport == 'web' }"
            >
              <div class="text-size-12 text-color-light-shade-1">CID</div>
              <div class="text-size-14">{{ personalizationData.userDetails.corporateId }}</div>
            </div>
            <div class="p-col-12 p-md-4 p-lg-4 p-px-3 p-pt-3 p-pb-1">
              <div class="text-size-12 text-color-light-shade-1">Corporate Name</div>
              <div class="text-size-14">
                {{ personalizationData.userDetails.corporateName }}
              </div>
            </div>
            <div class="p-col-12 p-md-4 p-lg-4 p-px-3 p-pt-3 p-pb-1">
              <div class="text-size-12 text-color-light-shade-1">Holding Company</div>
              <div class="text-size-14">
                {{ personalizationData.userDetails.holdingCompany }}
              </div>
            </div>
            <div class="p-col-12 p-md-4 p-lg-4 p-px-3 p-pt-3 p-pb-1">
              <div class="text-size-12 text-color-light-shade-1">Parent Name</div>
              <div class="text-size-14">
                {{ personalizationData.userDetails.parentName }}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-template>

  <!-- Office Details -->
  <ng-template #officeDetails let-data="data">
    <div class="aps-card p-my-3">
      <div class="p-grid">
        <div class="p-col-12 p-px-3 p-py-2">
          <div
            class="p-grid"
            (click)="!data.isEdit ? (data.isExpand = isExpanded(data.isExpand, $event)) : null"
          >
            <div class="p-col-6 p-pb-2 p-px-0 text-size-16 text-semi-bold">Office Details</div>
            <div class="p-col-6 p-pb-2 p-px-0 text-size-16" [ngClass]="{ 'p-py-1': data.isEdit }">
              <app-icon
                *ngIf="!data.isExpand"
                (click)="data.isExpand = isExpanded(data.isExpand, $event)"
                icon="fa-chevron-down"
                class="float-right pointer"
              >
              </app-icon>
              <app-icon
                *ngIf="data.isExpand && !data.isEdit"
                (click)="data.isExpand = isExpanded(data.isExpand, $event)"
                icon="fa-chevron-up"
                class="float-right pointer"
              >
              </app-icon>
              <app-icon
                *ngIf="!data.isEdit"
                (click)="data.isEdit = true; data.isExpand = true; onEditClick($event)"
                icon="fa-pencil"
                class="float-right pointer p-px-3"
              >
              </app-icon>
              <button
                class="btn btn-md btn-primary float-right"
                *ngIf="data.isEdit"
                (click)="onSaveClick($event); data.isEdit = false"
              >
                SAVE
              </button>
              <button
                class="btn btn-md btn-tertiary p-mx-2 float-right"
                *ngIf="data.isEdit"
                (click)="data.isEdit = false"
              >
                CANCEL
              </button>
            </div>
          </div>
          <div class="p-grid" *ngIf="data.isExpand">
            <div class="p-col-12 p-md-4 p-lg-4 p-p-3 border-top">
              <div class="text-size-12 text-color-light-shade-1">Registered Office Location</div>
              <div class="text-size-14">
                {{ personalizationData.userDetails.locationName }}
              </div>
            </div>
            <div
              class="p-col-12 p-md-4 p-lg-4 p-p-3"
              [ngClass]="{ 'border-top': viewport == 'web' }"
            >
              <div class="text-size-12 text-color-light-shade-1">Address</div>
              <div class="inline-block text-size-14">
                {{ personalizationData.userDetails.address1 }}
              </div>
              <div class="inline-block text-size-14">
                {{ personalizationData.userDetails.address2 }}
              </div>
              <div class="inline-block text-size-14">
                {{ personalizationData.userDetails.address3 }}
              </div>
            </div>
            <div
              class="p-col-12 p-md-4 p-lg-4 p-p-3"
              [ngClass]="{ 'border-top': viewport == 'web' }"
            ></div>
            <div class="p-col-12 p-md-4 p-lg-4 p-p-3 border-bottom">
              <div class="text-size-12 text-color-light-shade-1">Telephone No</div>
              <div class="text-size-14">
                {{ personalizationData.userDetails.organizationMobileNumber }}
              </div>
            </div>
            <div class="p-col-12 p-md-4 p-lg-4 p-p-3 border-bottom">
              <div class="text-size-12 text-color-light-shade-1">Corporate Branch</div>
              <div class="text-size-14">
                {{ personalizationData.userDetails.corporateBranchName }}
              </div>
            </div>
            <div class="p-col-12 p-md-4 p-lg-4 p-p-3 border-bottom">
              <div class="text-size-12 text-color-light-shade-1">Email ID</div>
              <div class="text-size-14">
                {{ personalizationData.userDetails.email }}
              </div>
            </div>
            <div class="p-col-12 p-md-4 p-lg-4 p-p-3">
              <div class="text-size-12 text-color-light-shade-1">Corporate Office Location</div>
              <div class="text-size-14">
                {{ personalizationData.userDetails.locationName }}
              </div>
            </div>
            <div class="p-col-12 p-md-4 p-lg-4 p-p-3">
              <div class="text-size-12 text-color-light-shade-1">Address</div>
              <div class="inline-block text-size-14">
                {{ personalizationData.userDetails.address1 }},
              </div>
              <div class="inline-block text-size-14">
                {{ personalizationData.userDetails.address2 }},
              </div>
              <div class="inline-block text-size-14">
                {{ personalizationData.userDetails.address3 }}
              </div>
            </div>
            <div class="p-col-12 p-md-4 p-lg-4 p-p-3"></div>
            <div class="p-col-12 p-md-4 p-lg-4 p-px-3 p-pt-3 p-pb-1">
              <div class="text-size-12 text-color-light-shade-1">Telephone No</div>
              <div class="text-size-14">
                {{ personalizationData.userDetails.organizationMobileNumber }}
              </div>
            </div>
            <div class="p-col-12 p-md-4 p-lg-4 p-px-3 p-pt-3 p-pb-1">
              <div class="text-size-12 text-color-light-shade-1">Fax No</div>
              <div class="text-size-14">
                {{ personalizationData.userDetails.organizationFax }}
              </div>
            </div>
            <div class="p-col-12 p-md-4 p-lg-4 p-px-3 p-pt-3 p-pb-1">
              <div class="text-size-12 text-color-light-shade-1">Email ID</div>
              <div class="text-size-14">
                {{ personalizationData.userDetails.email }}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-template>

  <!-- Anti Phishing -->
  <ng-template #antiPhishingDetails let-data="data">
    <div class="aps-card">
      <div class="p-grid">
        <div class="p-col-12 p-px-3 p-py-2">
          <div
            class="p-grid"
            (click)="!data.isEdit ? (data.isExpand = isExpanded(data.isExpand, $event)) : null"
          >
            <div class="p-col-6 p-pb-2 p-px-0 text-size-16 text-semi-bold">
              Anti Phishing
              <app-icon
                class="p-px-2 pointer"
                icon="fa-question-circle"
                pTooltip="Anti-Phishing Image and Message"
              >
              </app-icon>
            </div>
            <div class="p-col-6 p-pb-2 p-px-0 text-size-16" [ngClass]="{ 'p-py-1': data.isEdit }">
              <app-icon
                *ngIf="!data.isExpand"
                (click)="data.isExpand = isExpanded(data.isExpand, $event)"
                icon="fa-chevron-down"
                class="float-right pointer"
              >
              </app-icon>
              <app-icon
                *ngIf="data.isExpand && !data.isEdit"
                (click)="data.isExpand = isExpanded(data.isExpand, $event)"
                icon="fa-chevron-up"
                class="float-right pointer"
              >
              </app-icon>
              <app-icon
                *ngIf="!data.isEdit"
                (click)="data.isEdit = true; data.isExpand = true; onEditClick($event)"
                icon="fa-pencil"
                class="float-right pointer p-px-3"
              >
              </app-icon>
              <button
                class="btn btn-md btn-primary float-right"
                *ngIf="data.isEdit"
                (click)="onSaveClick($event); data.isEdit = false"
              >
                SAVE
              </button>
              <button
                class="btn btn-md btn-tertiary p-mx-2 float-right"
                *ngIf="data.isEdit"
                (click)="data.isEdit = false"
              >
                CANCEL
              </button>
            </div>
          </div>
          <div class="p-grid" *ngIf="data.isExpand">
            <div class="p-col-12 p-md-4 p-lg-4 p-px-0 p-py-3 p-px-0 border-top">
              <div class="text-size-12 text-color-light-shade-1">
                <span *ngIf="!data.isEdit">Selected Image</span>
                <span *ngIf="data.isEdit">Select Image</span>
                <sup class="text-color-danger" *ngIf="data.isEdit">*</sup>
                <span class="text-size-10 text-color-light-shade-1" *ngIf="data.isEdit">
                  (Click on image below to change)</span
                >
              </div>
              <img
                class="p-mt-2 aps-w-90p aps-h-150 border-radius-4"
                *ngIf="!data.isEdit"
                [src]="
                  antiPhishingPath +
                  personalizationData.userDetails.phishingDetails[0].phishingImageFileName
                "
                alt=""
              />
              <img
                class="p-mt-2 aps-w-90p aps-h-150 border-radius-4 pointer"
                *ngIf="data.isEdit"
                (click)="
                  tempPhishingImage =
                    personalizationEditData.userDetails.phishingDetails[0].phishingImageFileName;
                  isShowPhishingImages = true
                "
                [src]="
                  antiPhishingPath +
                  personalizationEditData.userDetails.phishingDetails[0].phishingImageFileName
                "
                alt=""
              />

              <!-- Phishing Image Selection Modal -->
              <app-modal [(isShow)]="isShowPhishingImages" size="sm" headerText="Select Image">
                <div body class="p-grid">
                  <div class="p-col-12 p-mt-3 p-px-0 p-pt-3 p-pb-0 border-top">
                    <img
                      class="p-mt-2 aps-w-100p aps-h-150 border-radius-4"
                      [src]="antiPhishingPath + tempPhishingImage"
                      alt=""
                    />
                  </div>
                  <div class="p-col-12 p-px-0 p-pt-1 pb-3 border-bottom">
                    <div class="p-grid">
                      <div
                        class="p-col-4 p-md-2 p-lg-2"
                        *ngFor="let img of [].constructor(18); let i = index"
                      >
                        <img
                          class="p-mt-2 aps-w-100p aps-h-100p border-radius-4 pointer"
                          (click)="tempPhishingImage = 'phishing' + i + '.jpg'"
                          [src]="antiPhishingPath + 'phishing' + i + '.jpg'"
                          alt=""
                        />
                      </div>
                    </div>
                  </div>
                </div>
                <div footer class="left-right-container">
                  <div class="left-container"></div>
                  <div class="right-container">
                    <button
                      class="p-mx-3 btn btn-md btn-tertiary"
                      (click)="isShowPhishingImages = false"
                    >
                      CANCEL
                    </button>
                    <button
                      class="btn btn-md btn-primary"
                      (click)="
                        personalizationEditData.userDetails.phishingDetails[0].phishingImageFileName =
                          tempPhishingImage;
                        isShowPhishingImages = false
                      "
                    >
                      SELECT
                    </button>
                  </div>
                </div>
              </app-modal>
            </div>
            <div
              class="p-col-12 p-md-8 p-lg-8 p-px-0 p-py-3 p-px-0 text-size-12"
              [ngClass]="{ 'border-top': viewport == 'web' }"
            >
              <div class="text-color-light-shade-1">
                Message
                <sup class="text-color-danger" *ngIf="data.isEdit">*</sup>
              </div>
              <div
                class="p-p-2 p-mt-2 aps-h-60 border-radius-4 background-color-disabled border"
                *ngIf="!data.isEdit"
              >
                <div>{{ personalizationData.userDetails.phishingDetails[0].message }}</div>
                <div class="float-right text-color-light-shade-3">
                  {{ personalizationData.userDetails.phishingDetails[0].message.length }}/100
                </div>
              </div>

              <div class="p-py-2 p-mt-2" *ngIf="data.isEdit">
                <aps-form-input
                  id="message"
                  name="message"
                  label="Enter Message"
                  [(ngModel)]="personalizationEditData.userDetails.phishingDetails[0].message"
                  [maxLength]="100"
                  helpText="{{
                    personalizationEditData.userDetails.phishingDetails[0].message.length
                  }}/100"
                  [required]="true"
                >
                </aps-form-input>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-template>

  <!-- Security Questions -->
  <ng-template #securityQuestionsDetails let-data="data">
    <div class="aps-card p-my-3">
      <div class="p-grid">
        <div class="p-col-12 p-px-3 p-py-2">
          <div
            class="p-grid"
            (click)="!data.isEdit ? (data.isExpand = isExpanded(data.isExpand, $event)) : null"
          >
            <div class="p-col-7 p-pb-2 p-px-0 text-size-16 text-semi-bold">
              Security Questions
              <app-icon
                class="p-px-2 pointer"
                icon="fa-question-circle"
                pTooltip="Security Questions and Answers"
              >
              </app-icon>
            </div>
            <div class="p-col-5 p-pb-2 p-px-0 text-size-16" [ngClass]="{ 'p-py-1': data.isEdit }">
              <app-icon
                *ngIf="!data.isExpand"
                (click)="data.isExpand = isExpanded(data.isExpand, $event)"
                icon="fa-chevron-down"
                class="float-right pointer"
              >
              </app-icon>
              <app-icon
                *ngIf="data.isExpand && !data.isEdit"
                (click)="data.isExpand = isExpanded(data.isExpand, $event)"
                icon="fa-chevron-up"
                class="float-right pointer"
              >
              </app-icon>
              <app-icon
                *ngIf="!data.isEdit"
                (click)="data.isEdit = true; data.isExpand = true; onEditClick($event)"
                icon="fa-pencil"
                class="float-right pointer p-px-3"
              >
              </app-icon>
              <button
                class="btn btn-md btn-primary float-right"
                *ngIf="data.isEdit"
                (click)="onSaveClick($event); data.isEdit = false"
              >
                SAVE
              </button>
              <button
                class="btn btn-md btn-tertiary p-mx-2 float-right"
                *ngIf="data.isEdit"
                (click)="data.isEdit = false"
              >
                CANCEL
              </button>
            </div>
          </div>
          <div class="p-grid" *ngIf="data.isExpand">
            <div
              class="p-col-12"
              *ngFor="
                let questionAnswer of personalizationData.userDetails.securityQuestionAnswers;
                let i = index
              "
              [ngClass]="{ 'border-top': i == 0 }"
            >
              <div class="p-grid">
                <div class="p-col-12 p-md-4 p-lg-4" [ngClass]="{ 'p-py-0': data.isEdit }">
                  <ng-container *ngIf="!data.isEdit">
                    <div class="text-size-12 text-color-light-shade-1">Question {{ i + 1 }}</div>
                    <div class="text-size-14">{{ questionAnswer.question }}</div>
                  </ng-container>
                  <ng-container *ngIf="data.isEdit">
                    <aps-custom-select
                      [id]="'question' + (i + 1)"
                      [name]="'question' + (i + 1)"
                      [label]="'Question ' + (i + 1)"
                      [(ngModel)]="
                        personalizationEditData.userDetails.securityQuestionAnswers[i].question
                      "
                      [value]="
                        personalizationEditData.userDetails.securityQuestionAnswers[i].question
                      "
                      dataUrl="commons/userPersonalization/private/dropdown/securityQuestions"
                      [required]="true"
                    >
                    </aps-custom-select>
                  </ng-container>
                </div>
                <div class="p-col-8 p-md-2 p-lg-2" [ngClass]="{ 'p-py-0': data.isEdit }">
                  <ng-container *ngIf="!data.isEdit">
                    <div class="text-size-12 text-color-light-shade-1">Answer {{ i + 1 }}</div>
                    <div class="text-size-14" *ngIf="questionAnswer.isView">
                      {{ questionAnswer.answer }}
                    </div>
                    <div class="text-size-14 p-pt-1" *ngIf="!questionAnswer.isView">
                      <span *ngFor="let star of [].constructor(questionAnswer.answer.length)"
                        >*</span
                      >
                    </div>
                  </ng-container>
                  <ng-container *ngIf="data.isEdit">
                    <aps-form-input
                      [id]="'answer' + (i + 1)"
                      [label]="'Answer ' + (i + 1)"
                      [name]="'answer' + (i + 1)"
                      [(ngModel)]="
                        personalizationEditData.userDetails.securityQuestionAnswers[i].answer
                      "
                      [required]="true"
                    >
                    </aps-form-input>
                  </ng-container>
                </div>
                <div class="p-col-4 p-md-2 p-lg-2 p-px-0 p-pt-3" *ngIf="!data.isEdit">
                  <app-icon
                    *ngIf="!questionAnswer.isView"
                    class="p-p-3 pointer"
                    icon="fa-eye"
                    (click)="questionAnswer.isView = true"
                  ></app-icon>
                  <app-icon
                    *ngIf="questionAnswer.isView"
                    class="p-p-3 pointer"
                    icon="fa-eye-slash"
                    (click)="questionAnswer.isView = false"
                  ></app-icon>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-template>

  <!-- Default Language -->
  <ng-template #defaultLanguageDetails let-data="data">
    <div class="aps-card">
      <div class="p-grid">
        <div class="p-col-12 p-px-3 p-py-2">
          <div
            class="p-grid"
            (click)="!data.isEdit ? (data.isExpand = isExpanded(data.isExpand, $event)) : null"
          >
            <div class="p-col-6 p-pb-2 p-px-0 text-size-16 text-semi-bold">Default Language</div>
            <div class="p-col-6 p-pb-2 p-px-0 text-size-16" [ngClass]="{ 'p-py-1': data.isEdit }">
              <app-icon
                *ngIf="!data.isExpand"
                (click)="data.isExpand = isExpanded(data.isExpand, $event)"
                icon="fa-chevron-down"
                class="float-right pointer"
              >
              </app-icon>
              <app-icon
                *ngIf="data.isExpand && !data.isEdit"
                (click)="data.isExpand = isExpanded(data.isExpand, $event)"
                icon="fa-chevron-up"
                class="float-right pointer"
              >
              </app-icon>
              <app-icon
                *ngIf="!data.isEdit"
                (click)="data.isEdit = true; data.isExpand = true; onEditClick($event)"
                icon="fa-pencil"
                class="float-right pointer p-px-3"
              >
              </app-icon>
              <button
                class="btn btn-md btn-primary float-right"
                *ngIf="data.isEdit"
                (click)="onSaveClick($event); data.isEdit = false"
              >
                SAVE
              </button>
              <button
                class="btn btn-md btn-tertiary p-mx-2 float-right"
                *ngIf="data.isEdit"
                (click)="data.isEdit = false"
              >
                CANCEL
              </button>
            </div>
          </div>
          <div class="p-grid" *ngIf="data.isExpand">
            <div class="p-col-12 p-pt-3 p-px-0 border-top">
              <div class="p-grid">
                <div class="p-col-12 p-md-4 p-lg-4 p-p-0">
                  <ng-container *ngIf="!data.isEdit">
                    <div class="text-size-12 text-color-light-shade-1">Default Language</div>
                    <div class="text-size-14">
                      {{ personalizationData.userDetails.languageDetails[0].languageName }}
                    </div>
                  </ng-container>
                  <ng-container *ngIf="data.isEdit">
                    <aps-custom-select
                      id="defaultLanguage"
                      name="defaultLanguage"
                      label="Default Language"
                      [(ngModel)]="
                        personalizationEditData.userDetails.languageDetails[0].languageId
                      "
                      [value]="personalizationEditData.userDetails.languageDetails[0].languageId"
                      [data]="languages"
                      (change)="
                        personalizationData.userDetails.languageDetails[0].languageName =
                          $event.displayName
                      "
                      [required]="true"
                    >
                    </aps-custom-select>
                  </ng-container>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-template>

  <!-- Login Preferences -->
  <ng-template #loginPreferenceDetails let-data="data">
    <div class="aps-card p-mt-3">
      <div class="p-grid">
        <div class="p-col-12 p-px-3 p-py-2">
          <div
            class="p-grid"
            (click)="!data.isEdit ? (data.isExpand = isExpanded(data.isExpand, $event)) : null"
          >
            <div class="p-col-6 p-pb-2 p-px-0 text-size-16 text-semi-bold">Login Preferences</div>
            <div class="p-col-6 p-pb-2 p-px-0 text-size-16" [ngClass]="{ 'p-py-1': data.isEdit }">
              <app-icon
                *ngIf="!data.isExpand"
                (click)="data.isExpand = isExpanded(data.isExpand, $event)"
                icon="fa-chevron-down"
                class="float-right pointer"
              >
              </app-icon>
              <app-icon
                *ngIf="data.isExpand && !data.isEdit"
                (click)="data.isExpand = isExpanded(data.isExpand, $event)"
                icon="fa-chevron-up"
                class="float-right pointer"
              >
              </app-icon>
              <app-icon
                *ngIf="!data.isEdit"
                (click)="data.isEdit = true; data.isExpand = true; onEditClick($event)"
                icon="fa-pencil"
                class="float-right pointer p-px-3"
              >
              </app-icon>
              <button
                class="btn btn-md btn-primary float-right"
                *ngIf="data.isEdit"
                (click)="onSaveClick($event); data.isEdit = false"
              >
                SAVE
              </button>
              <button
                class="btn btn-md btn-tertiary p-mx-2 float-right"
                *ngIf="data.isEdit"
                (click)="data.isEdit = false"
              >
                CANCEL
              </button>
            </div>
          </div>
          <div class="p-grid" *ngIf="data.isExpand">
            <div class="p-col-12 p-pt-3 p-px-0 border-top">
              <div class="p-grid">
                <div class="p-col-12 p-md-4 p-lg-4">
                  <ng-container *ngIf="!data.isEdit">
                    <div class="text-size-12 text-color-light-shade-1">Country</div>
                    <div class="text-size-14">
                      {{ personalizationData.userDetails.loginPreferenceDetails[0].countryName }}
                    </div>
                  </ng-container>
                  <ng-container *ngIf="data.isEdit">
                    <aps-custom-select
                      id="country"
                      name="country"
                      label="Country"
                      [(ngModel)]="
                        personalizationEditData.userDetails.loginPreferenceDetails[0].countryId
                      "
                      [value]="
                        personalizationEditData.userDetails.loginPreferenceDetails[0].countryId
                      "
                      dataUrl="setup/generalMasters/geography/private/getUserCountriesList"
                      [required]="true"
                      (change)="
                        personalizationEditData.userDetails.loginPreferenceDetails[0].countryName =
                          $event.displayName
                      "
                    >
                    </aps-custom-select>
                  </ng-container>
                </div>
                <div class="p-col-12 p-md-4 p-lg-4">
                  <ng-container *ngIf="!data.isEdit">
                    <div class="text-size-12 text-color-light-shade-1">Bank Type</div>
                    <div class="text-size-14">
                      {{ personalizationData.userDetails.loginPreferenceDetails[0].bankType }}
                    </div>
                  </ng-container>
                  <ng-container *ngIf="data.isEdit">
                    <div class="text-size-12 text-color-light-shade-1">
                      Bank Type<sup class="text-color-danger">*</sup>
                    </div>
                    <p-radioButton
                      class="p-px-1"
                      name="bankType"
                      value="Conventional"
                      label="Conventional"
                      [(ngModel)]="
                        personalizationEditData.userDetails.loginPreferenceDetails[0].bankType
                      "
                    >
                    </p-radioButton>
                    <p-radioButton
                      class="p-px-1"
                      name="bankType"
                      value="Islamic"
                      label="Islamic"
                      [(ngModel)]="
                        personalizationEditData.userDetails.loginPreferenceDetails[0].bankType
                      "
                    >
                    </p-radioButton>
                  </ng-container>
                </div>
                <div class="p-col-12 p-md-4 p-lg-4">
                  <ng-container *ngIf="!data.isEdit">
                    <div class="text-size-12 text-color-light-shade-1">Login Type</div>
                    <div class="text-size-14">
                      {{ personalizationData.userDetails.loginPreferenceDetails[0].loginType }}
                    </div>
                  </ng-container>
                  <ng-container *ngIf="data.isEdit">
                    <div class="text-size-12 text-color-light-shade-1">
                      Login Type<sup class="text-color-danger">*</sup>
                    </div>
                    <p-radioButton
                      class="p-px-1"
                      name="loginType"
                      value="Individual"
                      label="Individual"
                      [(ngModel)]="
                        personalizationEditData.userDetails.loginPreferenceDetails[0].loginType
                      "
                    >
                    </p-radioButton>
                    <p-radioButton
                      class="p-px-1"
                      name="loginType"
                      value="Group"
                      label="Group"
                      [(ngModel)]="
                        personalizationEditData.userDetails.loginPreferenceDetails[0].loginType
                      "
                    >
                    </p-radioButton>
                  </ng-container>
                </div>
                <div class="p-col-12 text-size-14">
                  <ng-container *ngIf="!data.isEdit">
                    <p-checkbox
                      id="displayWelcomeCardAtLogin"
                      name="displayWelcomeCardAtLogin"
                      [binary]="true"
                      label="Display Welcome Card at login?"
                      [(ngModel)]="
                        personalizationData.userDetails.loginPreferenceDetails[0]
                          .displayWelcomeCardAtLogin
                      "
                      [disabled]="true"
                    >
                    </p-checkbox>
                  </ng-container>
                  <ng-container *ngIf="data.isEdit">
                    <p-checkbox
                      id="displayWelcomeCardAtLogin"
                      name="displayWelcomeCardAtLogin"
                      [binary]="true"
                      label="Display Welcome Card at login?"
                      [(ngModel)]="
                        personalizationEditData.userDetails.loginPreferenceDetails[0]
                          .displayWelcomeCardAtLogin
                      "
                    >
                    </p-checkbox>
                  </ng-container>
                </div>
                <div class="p-col-12 text-size-14">
                  <ng-container *ngIf="!data.isEdit">
                    <p-checkbox
                      id="displayLoginPreferencesAfterLogin"
                      name="displayLoginPreferencesAfterLogin"
                      [binary]="true"
                      label="Display Login Preferences After Login?"
                      [(ngModel)]="
                        personalizationData.userDetails.loginPreferenceDetails[0]
                          .displayLoginPreferencesAfterLogin
                      "
                      [disabled]="true"
                    >
                    </p-checkbox>
                  </ng-container>
                  <ng-container *ngIf="data.isEdit">
                    <p-checkbox
                      id="displayLoginPreferencesAfterLogin"
                      name="displayLoginPreferencesAfterLogin"
                      [binary]="true"
                      label="Display Login Preferences After Login?"
                      [(ngModel)]="
                        personalizationEditData.userDetails.loginPreferenceDetails[0]
                          .displayLoginPreferencesAfterLogin
                      "
                    >
                    </p-checkbox>
                  </ng-container>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-template>

  <!-- Widget Mapping -->
  <ng-template #widgetMappingDetails let-data="data">
    <div class="aps-card p-mt-3">
      <div class="p-grid">
        <div class="p-col-12 p-px-3 p-py-2">
          <div
            class="p-grid"
            (click)="!data.isEdit ? (data.isExpand = isExpanded(data.isExpand, $event)) : null"
          >
            <div class="p-col-6 p-pb-2 p-px-0 text-size-16 text-semi-bold">Widget Mapping</div>
            <div class="p-col-6 p-pb-2 p-px-0 text-size-16" [ngClass]="{ 'p-py-1': data.isEdit }">
              <app-icon
                *ngIf="!data.isExpand"
                (click)="data.isExpand = isExpanded(data.isExpand, $event)"
                icon="fa-chevron-down"
                class="float-right pointer"
              >
              </app-icon>
              <app-icon
                *ngIf="data.isExpand && !data.isEdit"
                (click)="data.isExpand = isExpanded(data.isExpand, $event)"
                icon="fa-chevron-up"
                class="float-right pointer"
              >
              </app-icon>
              <app-icon
                *ngIf="!data.isEdit"
                (click)="data.isEdit = true; data.isExpand = true; onEditClick($event)"
                icon="fa-pencil"
                class="float-right pointer p-px-3"
              >
              </app-icon>
              <button
                class="btn btn-md btn-primary float-right"
                *ngIf="data.isEdit"
                (click)="onSaveClick($event); data.isEdit = false"
              >
                SAVE
              </button>
              <button
                class="btn btn-md btn-tertiary p-mx-2 float-right"
                *ngIf="data.isEdit"
                (click)="data.isEdit = false"
              >
                CANCEL
              </button>
            </div>
          </div>
          <div class="p-grid" *ngIf="data.isExpand">
            <div class="p-col-12 p-pt-3 p-px-0 border-top">
              <div class="p-grid">
                <div class="p-col-12 p-md-4 p-lg-4">
                  <ng-container *ngIf="!data.isEdit">
                    <div class="text-size-12 text-color-light-shade-1">Default Landing Page</div>
                    <div class="text-size-14">
                      {{
                        personalizationData.userDetails.loginPreferenceDetails[0]
                          .defaultDashboardName
                      }}
                    </div>
                  </ng-container>
                  <ng-container *ngIf="data.isEdit">
                    <aps-custom-select
                      id="defaultLandingPage"
                      name="defaultLandingPage"
                      label="Default Landing Page"
                      [(ngModel)]="
                        personalizationEditData.userDetails.loginPreferenceDetails[0]
                          .defaultDashboardId
                      "
                      [value]="
                        personalizationEditData.userDetails.loginPreferenceDetails[0]
                          .defaultDashboardId
                      "
                      [data]="dashboardList"
                      [required]="true"
                      (change)="onChangeDefaultDashboard($event)"
                    >
                    </aps-custom-select>
                  </ng-container>
                </div>
                <div class="p-col-12 p-md-8 p-lg-8 text-size-14 p-pt-3">
                  <ng-container *ngIf="!data.isEdit">
                    <p-checkbox
                      name="enableConsolidatedView"
                      binary="true"
                      label="Enable Consolidated View"
                      [(ngModel)]="
                        personalizationData.userDetails.loginPreferenceDetails[0]
                          .enableConsolidatedView
                      "
                      [disabled]="true"
                    >
                    </p-checkbox>
                  </ng-container>
                  <ng-container *ngIf="data.isEdit">
                    <p-checkbox
                      name="enableConsolidatedView"
                      binary="true"
                      label="Enable Consolidated View"
                      [(ngModel)]="
                        personalizationEditData.userDetails.loginPreferenceDetails[0]
                          .enableConsolidatedView
                      "
                    >
                    </p-checkbox>
                  </ng-container>
                </div>
                <!-- Widgets -->
                <ng-container
                  *ngIf="
                    (!data.isEdit &&
                      personalizationData.userDetails.loginPreferenceDetails[0]
                        .enableConsolidatedView) ||
                    (data.isEdit &&
                      personalizationEditData.userDetails.loginPreferenceDetails[0]
                        .enableConsolidatedView)
                  "
                >
                  <div class="p-col-12 p-mt-3 p-px-0 border-bottom">
                    <span class="text-size-14 text-semi-bold p-py-1 inline-block"
                      >Widgets&nbsp;</span
                    >
                    <span class="text-size-12 p-py-1 inline-block"
                      >(&nbsp;{{ getTotalSelectedWidgets() }}&nbsp;Widgets Selected)</span
                    >
                  </div>
                  <div
                    class="p-col-12 p-px-0 border-bottom"
                    *ngFor="
                      let product of data.isEdit
                        ? personalizationEditData.widgetMappingDetails
                        : personalizationData.widgetMappingDetails;
                      let i = index
                    "
                  >
                    <div class="p-grid" (click)="showHideWidgetDetails(product.name, $event)">
                      <div class="p-col-6 p-py-1 p-px-0">
                        <div class="text-size-12 text-semi-bold p-py-1">
                          <span class="inline-block">{{ product.name }}&nbsp;</span>
                          <span *ngIf="!data.isEdit" class="inline-block">
                            ({{ product.widgets.length }})
                          </span>
                          <span *ngIf="data.isEdit" class="inline-block">
                            ({{ product.widgets.length }})
                          </span>
                        </div>
                      </div>
                      <div class="p-col-6 p-py-1 p-px-0">
                        <app-icon
                          *ngIf="!product.isExpand"
                          (click)="showHideWidgetDetails(product.name, $event)"
                          icon="fa-chevron-down"
                          class="float-right pointer"
                        >
                        </app-icon>
                        <app-icon
                          *ngIf="product.isExpand"
                          (click)="showHideWidgetDetails(product.name, $event)"
                          icon="fa-chevron-up"
                          class="float-right pointer"
                        >
                        </app-icon>
                      </div>
                    </div>

                    <div class="p-grid" *ngIf="product.isExpand">
                      <div
                        class="p-col-12 p-md-4 p-lg-4"
                        *ngFor="let widget of product.widgets; let j = index"
                      >
                        <div class="p-m-3 p-p-2 border">
                          <div class="text-size-14">
                            <ng-container *ngIf="!data.isEdit">
                              <p-checkbox
                                name="widget{{ i }}{{ j }}"
                                id="widget{{ i }}{{ j }}"
                                [label]="widget.title"
                                [binary]="true"
                                [(ngModel)]="widget.isShow"
                                [disabled]="true"
                              >
                              </p-checkbox>
                            </ng-container>
                            <ng-container *ngIf="data.isEdit">
                              <p-checkbox
                                name="widget{{ i }}{{ j }}"
                                id="widget{{ i }}{{ j }}"
                                [label]="widget.title"
                                [binary]="true"
                                [(ngModel)]="widget.isShow"
                              >
                              </p-checkbox>
                            </ng-container>
                          </div>
                          <div class="p-grid">
                            <div
                              class="p-col-9 p-p-1 p-mt-1 border-top text-size-12 text-color-normal"
                            >
                              The widget displays {{ widget.title }} on basis of
                            </div>
                            <div class="p-col-3 p-p-1 p-mt-1 border-top">
                              <img
                                class="aps-h-100p aps-w-100p"
                                [src]="'./../../../../../assets/images/chart-1.PNG'"
                                alt=""
                              />
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </ng-container>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-template>

  <!-- Theme Selection -->
  <ng-template #themeSelectionDetails let-data="data">
    <div class="aps-card p-my-3">
      <div class="p-grid">
        <div class="p-col-12 p-px-3 p-py-2">
          <div
            class="p-grid"
            (click)="!data.isEdit ? (data.isExpand = isExpanded(data.isExpand, $event)) : null"
          >
            <div class="p-col-6 p-pb-2 p-px-0 text-size-16 text-semi-bold">Theme Selection</div>
            <div class="p-col-6 p-pb-2 p-px-0 text-size-16" [ngClass]="{ 'p-py-1': data.isEdit }">
              <app-icon
                *ngIf="!data.isExpand"
                (click)="data.isExpand = isExpanded(data.isExpand, $event)"
                icon="fa-chevron-down"
                class="float-right pointer"
              >
              </app-icon>
              <app-icon
                *ngIf="data.isExpand && !data.isEdit"
                (click)="data.isExpand = isExpanded(data.isExpand, $event)"
                icon="fa-chevron-up"
                class="float-right pointer"
              >
              </app-icon>
              <app-icon
                *ngIf="!data.isEdit"
                (click)="data.isEdit = true; data.isExpand = true; onEditClick($event)"
                icon="fa-pencil"
                class="float-right pointer p-px-3"
              >
              </app-icon>
              <button
                class="btn btn-md btn-primary float-right"
                *ngIf="data.isEdit"
                (click)="onSaveClick($event); data.isEdit = false"
              >
                SAVE
              </button>
              <button
                class="btn btn-md btn-tertiary p-mx-2 float-right"
                *ngIf="data.isEdit"
                (click)="data.isEdit = false"
              >
                CANCEL
              </button>
            </div>
          </div>
          <div class="p-grid" *ngIf="data.isExpand">
            <div class="p-col-12 p-my-1 p-p-0 border-top"></div>
            <div class="p-col-12 border border-radius-4 p-mt-2">
              <div class="p-grid">
                <div class="p-col-5 text-semi-bold p-p-1">Theme style</div>
                <div class="p-col-7 p-p-1">
                  <span class="text-size-14 float-right p-px-2">Light</span>
                  <p-inputSwitch
                    styleClass="float-right"
                    *ngIf="!data.isEdit"
                    [(ngModel)]="personalizationData.userDetails.themeDetails[0].isLightMode"
                    [disabled]="true"
                  >
                  </p-inputSwitch>
                  <p-inputSwitch
                    styleClass="float-right"
                    *ngIf="data.isEdit"
                    [(ngModel)]="personalizationEditData.userDetails.themeDetails[0].isLightMode"
                  >
                  </p-inputSwitch>
                  <span class="text-size-14 float-right p-px-2">Dark</span>
                </div>
              </div>
            </div>
            <div class="p-col-12 p-md-4 p-lg-4 p-px-2" *ngFor="let theme of themes; let i = index">
              <div class="border p-pb-2">
                <img
                  class="aps-h-100p aps-w-100p"
                  [src]="themeUrl + theme.enrichments.themeImage"
                  [alt]="theme.enrichments.themeImage"
                />
                <div class="p-grid p-jc-center">
                  <div class="p-col-6 p-md-3 p-lg-3 p-p-1">
                    <p-radioButton
                      *ngIf="!data.isEdit"
                      id="theme-{{ i }}"
                      name="theme-{{ i }}"
                      [value]="theme.id"
                      [label]="theme.displayName"
                      [(ngModel)]="personalizationData.userDetails.themeDetails[0].themeId"
                      [disabled]="true"
                    >
                    </p-radioButton>
                    <p-radioButton
                      *ngIf="data.isEdit"
                      id="theme-{{ i }}"
                      name="theme-{{ i }}"
                      [value]="theme.id"
                      [label]="theme.displayName"
                      [(ngModel)]="personalizationEditData.userDetails.themeDetails[0].themeId"
                    >
                    </p-radioButton>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-template>

  <!-- Alerts and Notifications -->
  <ng-template #alertsAndNotificationsDetails let-data="data">
    <div class="aps-card p-mb-3">
      <div class="p-grid">
        <div class="p-col-12 p-px-3 p-py-2">
          <div class="p-grid">
            <div class="p-col-6 p-pb-2 p-px-0 text-size-16 text-semi-bold">
              Alerts and Notifications
            </div>
            <div class="p-col-6 p-pb-2 p-px-0 p-pt-1 text-size-16">
              <app-icon
                (click)="data.isExpand = true"
                [ngClass]="{ 'p-mt-2': data.isEdit }"
                icon="fa-search"
                class="float-right pointer p-px-2"
              >
              </app-icon>
              <app-icon
                (click)="data.isExpand = true"
                [ngClass]="{ 'p-mt-2': data.isEdit }"
                icon="fa-filter"
                class="float-right pointer p-px-2"
                (click)="alertFilters.toggle($event)"
              >
              </app-icon>
              <app-icon
                *ngIf="!data.isEdit"
                (click)="data.isEdit = true; data.isExpand = true; onEditClick($event)"
                icon="fa-pencil"
                class="float-right pointer p-px-2"
              >
              </app-icon>
              <div class="border-left float-right aps-h-100p p-mx-2" *ngIf="data.isEdit"></div>
              <button
                class="btn btn-md btn-primary float-right"
                *ngIf="data.isEdit"
                (click)="onSaveClick($event); data.isEdit = false"
              >
                SAVE
              </button>
              <button
                class="btn btn-md btn-tertiary p-mx-2 float-right"
                *ngIf="data.isEdit"
                (click)="data.isEdit = false"
              >
                CANCEL
              </button>
              <p-overlayPanel [dismissable]="true" #alertFilters>
                <ng-template pTemplate>
                  <div>
                    <p-checkbox
                      class="p-m-2"
                      name="alertFilters"
                      value="Enabled"
                      label="Enabled"
                      [(ngModel)]="selectedAlertFilters"
                    ></p-checkbox>
                  </div>
                  <div>
                    <p-checkbox
                      class="p-m-2"
                      name="alertFilters"
                      value="Suspended"
                      label="Suspended"
                      [(ngModel)]="selectedAlertFilters"
                    ></p-checkbox>
                  </div>
                  <div>
                    <p-checkbox
                      class="p-m-2"
                      name="alertFilters"
                      value="Disabled"
                      label="Disabled"
                      [(ngModel)]="selectedAlertFilters"
                    ></p-checkbox>
                  </div>
                  <button
                    class="p-m-2 btn btn-md btn-primary float-right"
                    (click)="alertFilters.hide()"
                  >
                    SAVE
                  </button>
                </ng-template>
              </p-overlayPanel>
            </div>
            <div class="p-col-6 p-py-3 border-top border-bottom text-size-14 text-semi-bold">
              <span class="inline-block">All&nbsp;</span>
              <span class="inline-block">({{ getTotalAlerts() }})</span>
            </div>
            <div class="p-col-6 p-py-2 border-top border-bottom text-size-14 text-semi-bold">
              <button
                *ngIf="data.isEdit"
                class="btn btn-md btn-tertiary float-right"
                (click)="suspendAll()"
              >
                <app-icon icon="fa-times-circle" class="pointer p-px-1"></app-icon>
                SUSPEND ALL
              </button>
            </div>
            <div
              class="p-col-12 p-py-2 border-bottom"
              *ngFor="
                let product of personalizationData.alertsAndNotificationsDetails;
                let i = index
              "
            >
              <div
                class="p-grid"
                (click)="showHideAlertNotificationDetails(product.moduleId, $event)"
              >
                <div class="p-col-12 p-px-0 p-md-4 p-lg-4 text-size-12 text-semi-bold">
                  <span class="inline-block">{{ product.moduleName }}</span>
                  <span *ngIf="!data.isEdit" class="inline-block"
                    >({{ product.alerts.length }})</span
                  >
                  <span *ngIf="data.isEdit" class="inline-block"
                    >({{ product.alerts.length }})</span
                  >
                </div>
                <div class="p-col-12 p-md-8 p-lg-8" [ngClass]="{ 'p-py-0': product.isExpand }">
                  <app-icon
                    *ngIf="!product.isExpand"
                    (click)="showHideAlertNotificationDetails(product.moduleId, $event)"
                    icon="fa-chevron-down"
                    class="float-right pointer"
                  >
                  </app-icon>
                  <app-icon
                    *ngIf="product.isExpand"
                    (click)="showHideAlertNotificationDetails(product.moduleId, $event)"
                    icon="fa-chevron-up"
                    class="p-mt-1 float-right pointer"
                  >
                  </app-icon>
                  <span
                    *ngIf="!product.isExpand"
                    class="text-size-12 background-color-danger-light text-color-danger p-px-1 p-mr-2 p-ml-1 float-right"
                  >
                    <span class="inline-block">Disabled&nbsp;</span>
                    <span class="inline-block"
                      >({{ getAlertStatusCountByProduct(product.moduleId, 'Disabled') }})</span
                    >
                  </span>
                  <span
                    *ngIf="!product.isExpand"
                    class="text-size-12 background-color-warning-light text-color-warning p-px-1 p-mx-1 float-right"
                  >
                    <span class="inline-block">Suspended&nbsp;</span>
                    <span class="inline-block"
                      >({{ getAlertStatusCountByProduct(product.moduleId, 'Suspended') }})</span
                    >
                  </span>
                  <span
                    *ngIf="!product.isExpand"
                    class="text-size-12 background-color-success-light text-color-success p-px-1 p-mx-1 float-right"
                  >
                    <span class="inline-block">Enabled&nbsp;</span>
                    <span class="inline-block"
                      >({{ getAlertStatusCountByProduct(product.moduleId, 'Enabled') }})</span
                    >
                  </span>
                  <button
                    *ngIf="product.isExpand && data.isEdit"
                    class="p-py-1 btn btn-md btn-tertiary float-right"
                    (click)="suspendAllAlertsByProduct(product.moduleId)"
                  >
                    <app-icon icon="fa-times-circle" class="pointer p-px-1"></app-icon>
                    SUSPEND
                  </button>
                </div>
              </div>

              <div class="p-grid" *ngIf="product.isExpand">
                <div class="p-col-12 aps-h-180">
                  <app-ag-grid-listing
                    #productAlerts
                    id="productAlerts"
                    *ngIf="!data.isEdit"
                    colDefUrl="commons/userPersonalization/private/alertColDefs"
                    [rowData]="product.alerts"
                    [gridOptions]="alertGridOptions"
                    [frameworkComponents]="alertFrameworkComponents"
                    [supressAutoFit]="true"
                  >
                  </app-ag-grid-listing>
                  <app-ag-grid-listing
                    #productAlerts
                    id="productAlerts"
                    *ngIf="data.isEdit"
                    colDefUrl="commons/userPersonalization/private/alertColDefs"
                    [rowData]="product.alerts"
                    [gridOptions]="alertGridOptions"
                    [frameworkComponents]="alertFrameworkComponents"
                  >
                  </app-ag-grid-listing>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-template>

  <!-- Maker/Checker Limits -->
  <ng-template #makerCheckerLimitDetails let-data="data">
    <div class="aps-card p-mb-3">
      <div class="p-grid">
        <div class="p-col-12 p-px-3 p-py-2">
          <div class="p-grid">
            <div class="p-col-6 p-pb-2 p-px-0 text-size-16 text-semi-bold">
              Maker/Checker Limits
            </div>
            <div class="p-col-6 p-pb-2 p-px-0 p-pt-1 text-size-16">
              <app-icon icon="fa-search" class="float-right pointer p-px-2"></app-icon>
            </div>
            <div class="p-col-12 p-mt-2 p-p-0 aps-h-500">
              <app-ag-grid-listing
                id="makerChekerGrid"
                makerCheckerLimitColDefs
                colDefUrl="commons/userPersonalization/private/makerCheckerLimitColDefs"
                [rowData]="personalizationData.makerCheckerLimitDetails"
                [gridOptions]="makerCheckerGridOptions"
              >
              </app-ag-grid-listing>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-template>

  <!-- Authorisation Matrix Information -->
  <ng-template #authMatrixInfoDetails let-data="data">
    <div class="aps-card p-mb-3">
      <div class="p-grid">
        <div class="p-col-12 p-px-3 p-py-2">
          <div class="p-grid">
            <div class="p-col-6 p-pb-2 p-px-0 text-size-16 text-semi-bold">
              Authorisation Matrix Information
            </div>
            <div class="p-col-6 p-pb-2 p-px-0 p-pt-1 text-size-16">
              <app-icon icon="fa-search" class="float-right pointer p-px-2"></app-icon>
            </div>
            <div class="p-col-12 p-mt-3 p-p-0">
              <div class="p-grid">
                <ng-container *ngFor="let product of personalizationData.authMatrixInfoDetails">
                  <div class="p-col-12 p-mt-1 p-p-0 background-color-disabled">
                    <div
                      class="p-grid"
                      (click)="showHideAuthMatrixDetails(product.productId, $event)"
                    >
                      <div class="p-col-10 p-px-3 p-py-2 text-size-14 text-semi-bold">
                        <span class="inline-block">{{ product.productName }}&nbsp;</span>
                        <span class="inline-block">({{ product.authMatrixData.length }})</span>
                      </div>
                      <div class="p-col-2 p-px-3 p-py-2">
                        <app-icon
                          *ngIf="!product.isExpand"
                          (click)="
                            showHideAuthMatrixDetails(product.productId, $event);
                            isShowAuthMatrixAdditionalInfo = false
                          "
                          icon="fa-chevron-down"
                          class="float-right pointer"
                        >
                        </app-icon>
                        <app-icon
                          *ngIf="product.isExpand"
                          (click)="
                            showHideAuthMatrixDetails(product.productId, $event);
                            isShowAuthMatrixAdditionalInfo = false
                          "
                          icon="fa-chevron-up"
                          class="p-mt-1 float-right pointer"
                        >
                        </app-icon>
                      </div>
                    </div>
                  </div>
                  <div class="p-col-12 p-mt-1 p-px-3 py-2 aps-h-200" *ngIf="product.isExpand">
                    <app-ag-grid-listing
                      id="authMatrixInfoGrid"
                      colDefUrl="commons/userPersonalization/private/authMatrixInfoColDefs"
                      [rowData]="product.authMatrixData"
                      [gridOptions]="authMatrixGridOptions"
                      [frameworkComponents]="authMatrixFrameworkComponents"
                      supressAutoFit="true"
                    >
                    </app-ag-grid-listing>
                    <app-modal
                      [(isShow)]="isShowAuthMatrixAdditionalInfo"
                      hideBackdrop="true"
                      [customStyles]="authMatrixModalStyles"
                    >
                      <div body class="left-right-container aps-w-230">
                        <div class="left-container">{{ authMatrixAdditionalInfo }}</div>
                        <div class="right-container">
                          <app-icon
                            icon="fa-times"
                            class="pointer"
                            (click)="isShowAuthMatrixAdditionalInfo = false"
                          ></app-icon>
                        </div>
                      </div>
                    </app-modal>
                    <app-modal
                      [(isShow)]="isShowAuthMatrixAccounts"
                      hideBackdrop="true"
                      [customStyles]="authMatrixModalStyles"
                    >
                      <div body class="p-grid aps-w-200">
                        <div class="p-col-12 border-bottom">
                          <div class="left-right-container">
                            <div class="left-container text-size-14 text-semi-bold">Accounts</div>
                            <div class="right-container">
                              <app-icon icon="fa-search" class="pointer p-px-1"></app-icon>
                              <app-icon
                                icon="fa-times"
                                class="pointer"
                                (click)="isShowAuthMatrixAccounts = false"
                              ></app-icon>
                            </div>
                          </div>
                        </div>
                        <div class="p-col-12 p-p-0 aps-h-200 overflow-scroll">
                          <div class="p-grid">
                            <ng-container *ngFor="let account of authMatrixAccounts">
                              <div class="p-col-12 text-size-13">
                                {{ account }}
                              </div>
                            </ng-container>
                          </div>
                        </div>
                      </div>
                    </app-modal>
                  </div>
                </ng-container>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-template>

  <!-- Account Wise Access Information -->
  <ng-template #accountWiseAccessInfoDetails let-data="data">
    <div class="aps-card p-mb-3">
      <div class="p-grid">
        <div class="p-col-12 p-px-3 p-py-2">
          <div class="p-grid">
            <div class="p-col-6 p-pb-2 p-px-0 text-size-16 text-semi-bold">
              Account Wise Access Information
            </div>
            <div class="p-col-6 p-pb-2 p-px-0 p-pt-1 text-size-16">
              <app-icon icon="fa-search" class="float-right pointer p-px-2"></app-icon>
            </div>
            <div class="p-col-12 p-py-3 border-top">
              <span class="text-size-14 text-bold"> View By: </span>
              <p-radioButton
                class="p-px-2"
                name="accountWiseAccessViewBy"
                value="Products"
                label="Products"
                [(ngModel)]="accountWiseAccessViewBy"
              ></p-radioButton>
              <p-radioButton
                class="p-px-2"
                name="accountWiseAccessViewBy"
                value="Accounts"
                label="Accounts"
                [(ngModel)]="accountWiseAccessViewBy"
              ></p-radioButton>
            </div>
            <div class="p-col-12 p-p-0" *ngIf="accountWiseAccessViewBy == 'Products'">
              <div class="p-grid">
                <ng-container
                  *ngFor="
                    let product of personalizationData.accountWiseAccessInfoDetails
                      .productWiseAccountAccessDetails
                  "
                >
                  <div class="p-col-12 p-mt-1 p-p-0 background-color-disabled">
                    <div
                      class="p-grid"
                      (click)="showHideAccountWiseAccessProductDetails(product.id, $event)"
                    >
                      <div class="p-col-10 p-px-3 p-py-2 text-size-14 text-semi-bold">
                        <span class="inline-block">{{ product.label }}&nbsp;</span>
                        <span class="inline-block">({{ product.count }})</span>
                      </div>
                      <div class="p-col-2 p-px-3 p-py-2">
                        <app-icon
                          *ngIf="!product.isExpand"
                          (click)="showHideAccountWiseAccessProductDetails(product.id, $event)"
                          icon="fa-chevron-down"
                          class="float-right pointer"
                        >
                        </app-icon>
                        <app-icon
                          *ngIf="product.isExpand"
                          (click)="showHideAccountWiseAccessProductDetails(product.id, $event)"
                          icon="fa-chevron-up"
                          class="p-mt-1 float-right pointer"
                        >
                        </app-icon>
                      </div>
                    </div>
                  </div>
                  <div class="p-col-12 p-mt-1 p-px-3 py-2 aps-h-400" *ngIf="product.isExpand">
                    <app-ag-grid-listing
                      id="productWiseAccountAccessGrid"
                      colDefUrl="commons/userPersonalization/private/productWiseAccountAccessColDefs"
                      [rowData]="product.subProducts"
                      [gridOptions]="accountWiseAccessProductGridOptions"
                    >
                    </app-ag-grid-listing>
                  </div>
                </ng-container>
              </div>
            </div>
            <div class="p-col-12 p-p-0" *ngIf="accountWiseAccessViewBy == 'Accounts'">
              <div class="p-grid">
                <ng-container
                  *ngFor="
                    let account of personalizationData.accountWiseAccessInfoDetails
                      .accountWiseAccountAccessDetails
                  "
                >
                  <div class="p-col-12 p-mt-1 p-p-0 background-color-disabled">
                    <div class="p-grid" (click)="showHideAccountDetails(account.id, $event)">
                      <div class="p-col-10 p-px-3 p-py-2 text-size-14 text-semi-bold">
                        <span class="inline-block">{{ account.label }}&nbsp;</span>
                        <span class="inline-block">({{ account.count }})</span>
                      </div>
                      <div class="p-col-2 p-px-3 p-py-2">
                        <app-icon
                          *ngIf="!account.isExpand"
                          (click)="showHideAccountDetails(account.id, $event)"
                          icon="fa-chevron-down"
                          class="float-right pointer"
                        >
                        </app-icon>
                        <app-icon
                          *ngIf="account.isExpand"
                          (click)="showHideAccountDetails(account.id, $event)"
                          icon="fa-chevron-up"
                          class="p-mt-1 float-right pointer"
                        >
                        </app-icon>
                      </div>
                    </div>
                  </div>
                  <div class="p-col-12 p-mt-1 p-px-3 py-2 aps-h-400" *ngIf="account.isExpand">
                    <app-ag-grid-listing
                      id="accountWiseAccountAccessGrid"
                      colDefUrl="commons/userPersonalization/private/accountWiseAccountAccessColDefs"
                      [rowData]="account.products"
                      [gridOptions]="accountWiseAccessAccountGridOptions"
                    >
                    </app-ag-grid-listing>
                  </div>
                </ng-container>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-template>

  <ng-template #loadingTemplate>
    <app-loading-spinner></app-loading-spinner>
  </ng-template>
</div>
